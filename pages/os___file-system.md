- 文件系统是操作系统中负责管理持久数据的子系统
- Linux 文件系统会为每个文件分配两个数据结构： **索引节点（*index node*）和目录项（*directory entry*）** ，它们主要用来记录文件的元信息和目录层次结构。
  - 索引节点，也就是 __inode__ ，用来记录文件的元信息，比如 inode 编号、文件大小、访问权限、创建时间、修改时间、 **数据在磁盘的位置** 等等。索引节点是文件的 **唯一** 标识，它们之间一一对应，也同样都会被存储在硬盘中，所以 **索引节点同样占用磁盘空间** 。
  - 目录项，也就是 __dentry__ ，用来记录文件的名字、 **索引节点指针** 以及与其他目录项的层级关联关系。多个目录项关联起来，就会形成目录结构，但它与索引节点不同的是， **目录项是由内核维护的一个数据结构，不存放于磁盘，而是缓存在内存** 。
- 由于索引节点唯一标识一个文件，而目录项记录着文件的名，所以目录项和索引节点的关系是多对一，也就是说，一个文件可以有多个别字。比如，硬链接的实现就是多个目录项中的索引节点指向同一个文件。 注意，目录也是文件，也是用索引节点唯一标识，和普通文件不同的是，普通文件在磁盘里面保存的是文件数据，而目录文件在磁盘里面保存子目录或文件
- <h3>虚拟文件系统</h3>
  - 文件系统的种类众多，而操作系统希望 **对用户提供一个统一的接口** ，于是在用户层与文件系统层引入了中间层，这个中间层就称为 **虚拟文件系统（*Virtual File System，VFS*）。** VFS 定义了一组所有文件系统都支持的数据结构和标准接口，这样程序员不需要了解文件系统的工作原理，只需要了解 VFS 提供的统一接口即可
  - 用户空间、系统调用、虚拟机文件系统、缓存、文件系统以及存储之间的关系如下图：
    - ![image.png](../assets/image_1648111724662_0.png)
  - Linux 支持的文件系统也不少，根据存储位置的不同，可以把文件系统分为三类
    - __磁盘的文件系统__ ，它是直接把数据存储在磁盘中，比如 Ext 2/3/4、XFS 等都是这类文件系统。
    - __内存的文件系统__ ，这类文件系统的数据不是存储在硬盘的，而是占用内存空间，我们经常用到的 `/proc` 和 `/sys` 文件系统都属于这一类，读写这类文件，实际上是读写内核中相关的数据数据。
    - __网络的文件系统__ ，用来访问其他计算机主机数据的文件系统，比如 NFS、SMB 等等。
  - 文件系统首先要先挂载到某个目录才可以正常使用，比如 Linux 系统在启动时，会把文件系统挂载到根目录。
- Refs
  - [文件系统的理解、硬链接与软链接 | Li-eng](http://lienguang.xyz/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/)
    https://github.com/Li-enguang/Li-enguang.github.io/blob/master/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/index.html
  -