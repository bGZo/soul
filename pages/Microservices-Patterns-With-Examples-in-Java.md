icon:: ğŸ“–
title:: Microservices-Patterns-With-Examples-in-Java
alias:: book/å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼
tags:: #book #develop #microserver #Java
author:: [ç¾] å…‹é‡Œæ–¯Â·ç†æŸ¥æ£®ï¼ˆChris Richardsonï¼‰
publisher:: æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾
published-date:: 20190500
isbn:: 9787111624127
start-date:: 20221213
end::
douban:: [å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼ (è±†ç“£)](https://book.douban.com/subject/33425123/)
goodreads:: [Microservices Patterns: With examples in Java by Chris Richardson, Manning Publications by Chris Richardson | Goodreads](https://www.goodreads.com/book/show/55612970-microservices-patterns)
weread::
mark:: [microservices-patterns/ftgo-application: Example code for the book Microservice patterns](https://github.com/microservices-patterns/ftgo-application); <`<Stop>`>

- ## ![å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼ by å…‹é‡Œæ–¯Â·ç†æŸ¥æ£®](../assets/book_å¾®æœåŠ¡æ¶æ„è®¾è®¡æ¨¡å¼_å…‹é‡Œæ–¯Â·ç†æŸ¥æ£®_chris_richardson.pdf)
  collapsed:: true
  - `([\u4e00-\u9fa5ï¼Œã€‚ï¼Ÿï¼›ï¼šâ€â€œã€]) ([\u4e00-\u9fa5ï¼Œã€‚ï¼Ÿï¼›ï¼šâ€â€œã€])`
    `$1$2`
    #regex
  - `(\w+) (\w+)`
- ## CONTENT
  collapsed:: true
  - å†™ç»™ä¸­æ–‡ç‰ˆè¯»è€…çš„è¯
    - æˆ‘æƒ³å¯¹æœ¬ä¹¦çš„è¯»è€…è¯´ï¼šcollapsed:: true
      - ç¬¬ä¸€ï¼Œè¦è®°ä½å¾®æœåŠ¡ä¸æ˜¯è§£å†³æ‰€æœ‰é—®é¢˜çš„ä¸‡èƒ½ â€œé“¶å¼¹â€
        - ^^Silver bullet, ä¸‡é‡‘æ²¹^^, via: [Silver bullet - Wikipedia](https://en.wikipedia.org/wiki/Silver_bullet) & [é“¶è‰²å­å¼¹ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.wikipedia.org/wiki/%E9%8A%80%E8%89%B2%E5%AD%90%E5%BD%88)
      - ç¬¬äºŒï¼Œç¼–å†™æ•´æ´çš„ä»£ç å’Œä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•è‡³å…³é‡è¦ï¼Œå› ä¸ºè¿™æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„åŸºç¡€
      - ç¬¬ä¸‰ï¼Œå…³æ³¨å¾®æœåŠ¡çš„æœ¬è´¨ï¼Œå³**æœåŠ¡çš„åˆ†è§£å’Œå®šä¹‰ï¼Œè€Œä¸æ˜¯æŠ€æœ¯**ï¼Œå¦‚å®¹å™¨å’Œå…¶ä»–å·¥å…·
      - ç¬¬å››ï¼Œç¡®ä¿ä½ çš„æœåŠ¡æ¾è€¦åˆï¼Œå¹¶ä¸”å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œä¸è¦ææˆåˆ†å¸ƒå¼å•ä½“ (Distributed Monolith), é‚£å°†ä¼šæ˜¯å·¨å¤§çš„ç¾éš¾ã€‚
      - ç¬¬äº”ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œä¸èƒ½åªæ˜¯åœ¨æŠ€æœ¯ä¸Šé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ã€‚ æ‹¥æŠ±DevOpsçš„åŸåˆ™å’Œå®è·µï¼Œåœ¨ç»„ç»‡ç»“æ„ä¸Šå®ç°è·¨èŒèƒ½çš„è‡ªæ²»å›¢é˜Ÿï¼Œè¿™å¿…ä¸å¯å°‘ã€‚
      - è¿˜å¿…é¡»è®°ä½ï¼š
        - å®ç°å¾®æœåŠ¡æ¶æ„å¹¶ä¸æ˜¯ä½ çš„ç›®æ ‡ã€‚ä½ çš„ç›®æ ‡æ˜¯åŠ é€Ÿå¤§å‹å¤æ‚åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚
  - è¯‘è€…åº
  - ä¸­æ–‡ç‰ˆåºä¸€
  - ä¸­æ–‡ç‰ˆåºäºŒ
  - å‰è¨€
    - > æˆ‘æœ€å–œæ¬¢çš„æ ¼è¨€ä¹‹ä¸€æ˜¯ï¼šæœªæ¥å·²ç»åˆ°æ¥ï¼Œåªæ˜¯è¿˜æ²¡æœ‰å¹³å‡åˆ†å¸ƒã€‚
      > ï¼ï¼ï¼å¨å»‰Â·å‰å¸ƒæ£®ï¼Œç§‘å¹»å°è¯´ä½œå®¶
      >
    - æœ¬ä¹¦å†…å®¹å®‰æ’
      collapsed:: true
      - ç¬¬1ç« æè¿°äº†æ‰€è°“"å•ä½“åœ°ç‹±"çš„ç—‡çŠ¶ï¼Œå½“å•ä½“åº”ç”¨ç¨‹åºè¶…å‡ºå…¶æ¶æ„æ—¶ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œè¿™å¯ä»¥é€šè¿‡é‡‡ç”¨å¾®æœåŠ¡æ¶æ„æ¥è§„é¿ã€‚è¿™ä¸€ç« è¿˜æ¦‚è¿°äº†å¾®æœåŠ¡æ¶æ„æ¨¡å¼è¯­è¨€ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ä¹¦å¤§éƒ¨åˆ†å†…å®¹çš„ä¸»é¢˜ã€‚
      - ç¬¬2ç« è§£é‡Šäº†ä¸ºä»€ä¹ˆè½¯ä»¶æ¶æ„å¾ˆé‡è¦ï¼Œæè¿°äº†å¯ç”¨äºå°†åº”ç”¨ç¨‹åºåˆ†è§£ä¸ºæœåŠ¡é›†åˆçš„æ¨¡å¼ï¼Œå¹¶è§£é‡Šäº†å¦‚ä½•å…‹æœåœ¨æ­¤è¿‡ç¨‹ä¸­é‡åˆ°çš„å„ç§éšœç¢ã€‚
      - ç¬¬3ç«  ä»‹ç»äº†å¾®æœåŠ¡æ¶æ„ä¸­å¼ºå¤§çš„==è¿›ç¨‹é—´é€šä¿¡çš„å‡ ç§æ¨¡å¼==ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆå¼‚æ­¥å’ŒåŸºäºæ¶ˆæ¯çš„é€šä¿¡é€šå¸¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚
      - ç¬¬4ç«  ä»‹ç»å¦‚ä½•ä½¿ç”¨==Sagaæ¨¡å¼ç»´æŠ¤æœåŠ¡é—´çš„æ•°æ®ä¸€è‡´æ€§==
        - Sagaæ˜¯é€šè¿‡ä¼ é€’å¼‚æ­¥æ¶ˆæ¯çš„æ–¹å¼è¿›è¡Œåè°ƒçš„ä¸€ç³»åˆ—æœ¬åœ°äº‹åŠ¡ã€‚
      - ç¬¬5ç«  ä»‹ç»å¦‚ä½•ä½¿ç”¨==é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)çš„èšåˆå’Œé¢†åŸŸäº‹ä»¶ç­‰æ¨¡å¼==ä¸ºæœåŠ¡è®¾è®¡ä¸šåŠ¡é€»è¾‘
      - ç¬¬6ç«  ä»¥ç¬¬5ç« ä¸ºåŸºç¡€ï¼Œè§£é‡Šäº†å¦‚ä½•ä½¿ç”¨==äº‹ä»¶æº¯æºæ¨¡å¼==å¼€å‘ä¸šåŠ¡é€»è¾‘ï¼Œäº‹ä»¶æº¯æºæ¨¡å¼æ˜¯ä¸€ç§ä»¥äº‹ä»¶ä¸ºä¸­å¿ƒçš„è®¾è®¡æ€è·¯ï¼Œç”¨æ¥æ„å»ºä¸šåŠ¡é€»è¾‘å’ŒæŒä¹…åŒ–é¢†åŸŸå¯¹è±¡ã€‚
      - ç¬¬7ç«  ä»‹ç»å¦‚ä½•ä½¿ç”¨ API ç»„åˆæ¨¡å¼æˆ–å‘½ä»¤æŸ¥è¯¢èŒè´£éš”ç¦»(CQRS)æ¨¡å¼ï¼Œè¿™ä¸¤ä¸ªæ¨¡å¼ç”¨æ¥å®ç°æŸ¥è¯¢åˆ†æ•£åœ¨å¤šä¸ªæœåŠ¡ä¸­çš„æ•°æ®ã€‚
      - ç¬¬8ç«  ä»‹ç»äº†å¤„ç†æ¥è‡ªå„ç§å¤–éƒ¨å®¢æˆ·ç«¯è¯·æ±‚çš„å¤–éƒ¨APIæ¨¡å¼ï¼Œä¾‹å¦‚ç§»åŠ¨åº”ç”¨ç¨‹åºã€åŸºäºæµè§ˆå™¨çš„JavaScriptåº”ç”¨ç¨‹åºå’Œç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€‚
      - ç¬¬9ç«  æ˜¯å…³äºå¾®æœåŠ¡è‡ªåŠ¨åŒ–æµ‹è¯•æŠ€æœ¯çš„ä¸¤ç« ä¸­çš„ç¬¬ä¸€ç« ï¼Œä»‹ç»äº†é‡è¦çš„æµ‹è¯•æ¦‚å¿µ
        - ä¾‹å¦‚æµ‹è¯•é‡‘å­—å¡”ï¼Œæè¿°äº†æµ‹è¯•å¥—ä»¶ä¸­æ¯ç§æµ‹è¯•ç±»å‹çš„ç›¸å¯¹æ¯”ä¾‹ï¼Œè¿˜å±•ç¤ºäº†å¦‚ä½•ç¼–å†™æ„æˆæµ‹è¯•é‡‘å­—å¡”åŸºç¡€çš„å•å…ƒæµ‹è¯•ã€‚
      - ç¬¬10ç«  ä»¥ç¬¬9ç« ä¸ºåŸºç¡€ï¼Œæè¿°äº†å¦‚ä½•åœ¨æµ‹è¯•é‡‘å­—å¡”ä¸­ç¼–å†™å…¶ä»–ç±»å‹çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬é›†æˆæµ‹è¯•ã€æ¶ˆè´¹è€…å¥‘çº¦æµ‹è¯•å’Œç»„ä»¶æµ‹è¯•ç­‰ã€‚
      - ç¬¬11ç« ä»‹ç»äº†å¼€å‘ç”Ÿäº§å°±ç»ªæœåŠ¡çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§ã€å¤–éƒ¨åŒ–é…ç½®æ¨¡å¼å’ŒæœåŠ¡å¯è§‚æµ‹æ€§æ¨¡å¼ã€‚æœåŠ¡å¯è§‚æµ‹æ€§æ¨¡å¼åŒ…æ‹¬æ—¥å¿—èšåˆã€åº”ç”¨æŒ‡æ ‡å’Œåˆ†å¸ƒå¼è¿½è¸ªã€‚
      - ç¬¬12ç«  ä»‹ç»äº†å¯ç”¨äºéƒ¨ç½²æœåŠ¡çš„å„ç§==éƒ¨ç½²æ¨¡å¼==ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºã€å®¹å™¨å’ŒServerlessæ¨¡å¼ã€‚è¿˜ä»‹ç»äº†ä½¿ç”¨æœåŠ¡ç½‘æ ¼çš„å¥½å¤„ï¼ŒæœåŠ¡ç½‘æ ¼æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å¤„ç†æœåŠ¡é—´é€šä¿¡çš„ä¸€ä¸ªç½‘ç»œè½¯ä»¶å±‚ã€‚
      - ç¬¬13ç« ä»‹ç»äº†å¦‚ä½•é€šè¿‡é‡‡ç”¨==ç»æ€è€…(Strangler)æ¨¡å¼==é€æ­¥å°†å•ä½“æ¶æ„é‡æ„ä¸ºå¾®æœåŠ¡æ¶æ„ï¼Œç»æ€è€…æ¨¡å¼æ˜¯æŒ‡ä»¥æœåŠ¡å½¢å¼å®ç°æ–°åŠŸèƒ½ï¼Œä»å•ä½“ä¸­æå–æ¨¡å—å°†å…¶è½¬æ¢ä¸ºæœåŠ¡ã€‚
      -
  - å¼•è¨€
  - ç¬¬1ç«  é€ƒç¦»å•ä½“åœ°ç‹±
    - 1.1 è¿ˆå‘å•ä½“åœ°ç‹±çš„æ¼«é•¿æ—…ç¨‹
      - 1.1.1 FTGOåº”ç”¨ç¨‹åºçš„æ¶æ„
      - 1.1.2 å•ä½“æ¶æ„çš„å¥½å¤„
      - 1.1.3 ä»€ä¹ˆæ˜¯å•ä½“åœ°ç‹±
    - 1.2 ä¸ºä»€ä¹ˆæœ¬ä¹¦ä¸ä½ æœ‰å…³
    - 1.3 ä½ ä¼šåœ¨æœ¬ä¹¦ä¸­å­¦åˆ°ä»€ä¹ˆ
    - 1.4 æ‹¯æ•‘ä¹‹é“ï¼šå¾®æœåŠ¡æ¶æ„
      - 1.4.1 æ‰©å±•ç«‹æ–¹ä½“å’ŒæœåŠ¡
      - 1.4.2 å¾®æœåŠ¡æ¶æ„ä½œä¸ºæ¨¡å—åŒ–çš„ä¸€ç§å½¢å¼
      - 1.4.3 æ¯ä¸ªæœåŠ¡éƒ½æ‹¥æœ‰è‡ªå·±çš„æ•°æ®åº“
      - 1.4.4 FTGOçš„å¾®æœåŠ¡æ¶æ„
      - 1.4.5 å¾®æœåŠ¡æ¶æ„ä¸SOAçš„å¼‚åŒ
    - 1.5 å¾®æœåŠ¡æ¶æ„çš„å¥½å¤„å’Œå¼Šç«¯
      - 1.5.1 å¾®æœåŠ¡æ¶æ„çš„å¥½å¤„
      - 1.5.2 å¾®æœåŠ¡æ¶æ„çš„å¼Šç«¯
    - 1.6 å¾®æœåŠ¡æ¶æ„çš„æ¨¡å¼è¯­è¨€
      - 1.6.1 å¾®æœåŠ¡æ¶æ„å¹¶ä¸æ˜¯â€œé“¶å¼¹â€
      - 1.6.2 æ¨¡å¼å’Œæ¨¡å¼è¯­è¨€
      - 1.6.3 å¾®æœåŠ¡æ¶æ„çš„æ¨¡å¼è¯­è¨€æ¦‚è¿°
    - 1.7 å¾®æœåŠ¡ä¹‹ä¸Šï¼šæµç¨‹å’Œç»„ç»‡
      - 1.7.1 è¿›è¡Œè½¯ä»¶å¼€å‘å’Œäº¤ä»˜çš„ç»„ç»‡
      - 1.7.2 è¿›è¡Œè½¯ä»¶å¼€å‘å’Œäº¤ä»˜çš„æµç¨‹
      - 1.7.3 é‡‡ç”¨å¾®æœåŠ¡æ¶æ„æ—¶çš„äººä¸ºå› ç´ 
  - ç¬¬2ç«  æœåŠ¡çš„æ‹†åˆ†ç­–ç•¥
    collapsed:: true
    - 2.1 å¾®æœåŠ¡æ¶æ„åˆ°åº•æ˜¯ä»€ä¹ˆ
      - ä¼ ç»Ÿä¸Šï¼Œæ¶æ„çš„ç›®æ ‡æ˜¯å¯æ‰©å±•æ€§ã€å¯é æ€§å’Œå®‰å…¨æ€§ã€‚ä½†æ˜¯ä»Šå¤©ï¼Œè¯¥æ¶æ„èƒ½å¤Ÿ**å¿«é€Ÿå®‰å…¨åœ°äº¤ä»˜è½¯ä»¶**ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦
      - 2.1.1 è½¯ä»¶æ¶æ„æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤é‡è¦
        collapsed:: true
        - 2ä¸ªä¸“é—¨è®¨è®ºè¯¥ä¸»é¢˜çš„ä¼šè®®
          collapsed:: true
          - [O&#39;Reillyçš„è½¯ä»¶æ¶æ„ä¼šè®®](https://conferences.oreilly.com/software-architecture)
          - [SATURNä¼šè®®](https://resources.sei.cmu.edu/news-events/events/saturn)
        - è½¯ä»¶æ¶æ„æ˜¯ä»€ä¹ˆ
          collapsed:: true
          - collapsed:: true
            > è®¡ç®—æœºç³»ç»Ÿçš„è½¯ä»¶æ¶æ„æ˜¯æ„å»ºè¿™ä¸ªç³»ç»Ÿæ‰€éœ€è¦çš„ä¸€ç»„ç»“æ„ï¼ŒåŒ…æ‹¬è½¯ä»¶å…ƒç´ ã€ å®ƒä»¬ä¹‹é—´çš„å…³ç³»ä»¥åŠä¸¤è€…çš„å±æ€§ã€‚
            > â€” Len Bass ç­‰è‘—ã€ŠDocumenting Software Architectures: Views and Beyondã€‹ From [å¡è€åŸºæ¢…éš†å¤§å­¦è½¯ä»¶å·¥ç¨‹ç ”ç©¶æ‰€](http://www.sei.cmu.edu)
            >
            - ä½†å…¶å®è´¨æ˜¯åº”ç”¨ç¨‹åºçš„æ¶æ„æ˜¯å°† è½¯ä»¶åˆ†è§£ä¸ºå…ƒç´  (element) å’Œè¿™äº›å…ƒç´ ä¹‹é—´çš„å…³ç³» (relation )
        - åˆ†è§£**é‡è¦**
          collapsed:: true
          - å®ƒä¿ƒè¿›äº†**åŠ³åŠ¨å’ŒçŸ¥è¯†çš„åˆ†å·¥**
            collapsed:: true
            - å®ƒä½¿å…·æœ‰ç‰¹å®šä¸“ä¸šçŸ¥è¯†çš„äººä»¬ (æˆ–å¤šä¸ªå›¢é˜Ÿ) èƒ½å°±åº”ç”¨ç¨‹åºé«˜æ•ˆåœ°ååŒå·¥ä½œ
          - å®ƒå®šä¹‰äº†**è½¯ä»¶å…ƒç´ çš„äº¤äº’æ–¹å¼**
        - å°†è½¯ä»¶åˆ†è§£æˆå…ƒç´ ä»¥åŠå®šä¹‰è¿™äº›å…ƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œå†³å®šäº†è½¯ä»¶çš„èƒ½åŠ›
        - è½¯ä»¶æ¶æ„çš„ 4+1 è§†å›¾æ¨¡å‹
          collapsed:: true
          - ï¼‹1æ˜¯æŒ‡åœºæ™¯
            collapsed:: true
            - å®ƒè´Ÿè´£æŠŠè§†å›¾ä¸²è”åœ¨ä¸€èµ·
            - æ¯ä¸ªåœºæ™¯è´Ÿè´£æè¿°åœ¨ä¸€ä¸ªè§†å›¾ä¸­çš„å¤šä¸ªæ¶æ„å…ƒç´ å¦‚ä½•åä½œ, ä»¥å®Œæˆä¸€ä¸ªè¯·æ±‚
              collapsed:: true
              - ä¾‹å¦‚
                collapsed:: true
                - åœ¨é€»è¾‘è§†å›¾ä¸­çš„åœºæ™¯ï¼Œå±•ç°äº†ç±»æ˜¯å¦‚ä½•åä½œçš„
                - åœ¨è¿›ç¨‹è§†å›¾ä¸­çš„åœºæ™¯ï¼Œå±•ç°äº†è¿›ç¨‹æ˜¯å¦‚ä½•åä½œçš„ã€‚
          - More via ((63959db5-f30c-467a-970d-68960d208fae))
        - æ¶æ„**é‡è¦**
          collapsed:: true
          - å¸®åŠ©åº”ç”¨ç¨‹åºæ»¡è¶³äº†ç¬¬ 2 ç±»éœ€æ±‚ -> **éåŠŸèƒ½æ€§éœ€æ±‚**
            collapsed:: true
            - ä¹Ÿç§°ä¹‹ä¸º**è´¨é‡å±æ€§éœ€æ±‚ / "èƒ½åŠ›"**
            - éåŠŸèƒ½æ€§éœ€æ±‚å†³å®šä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨**è¿è¡Œæ—¶çš„è´¨é‡ (å¯æ‰©å±•æ€§å’Œå¯é æ€§)**;
              collapsed:: true
              - ä¹Ÿå†³å®šäº†**å¼€å‘é˜¶æ®µçš„è´¨é‡ (å¯ç»´æŠ¤æ€§, å¯æµ‹è¯•æ€§, å¯æ‰©å±•æ€§å’Œå¯éƒ¨ç½²æ€§)**
          - ç¬¬ 1 ç±»æ˜¯åŠŸèƒ½æ€§éœ€æ±‚
            collapsed:: true
            - è¿™äº›éœ€æ±‚å†³å®šä¸€ä¸ªåº”ç”¨ç¨‹åºåšä»€ä¹ˆ
            - é€šå¸¸éƒ½åŒ…å«åœ¨ç”¨ä¾‹ï¼ˆuse case) / ç”¨æˆ·æ•…äº‹ (user story) ä¸­
            - åº”ç”¨çš„æ¶æ„å…¶å®è·Ÿè¿™äº›åŠŸèƒ½æ€§éœ€æ±‚æ²¡ä»€ä¹ˆå…³ç³»
            - åŠŸèƒ½æ€§éœ€æ±‚å¯ä»¥é€šè¿‡ä»»æ„çš„æ¶æ„æ¥å®ç°ï¼Œç”šè‡³æ˜¯éå¸¸ç³Ÿç³•çš„å¤§æ³¥çƒæ¶æ„
      - 2.1.2 ä»€ä¹ˆæ˜¯æ¶æ„çš„é£æ ¼
        collapsed:: true
        - å»ºç­‘é£æ ¼çš„æ¦‚å¿µä¹Ÿé€‚ç”¨è½¯ä»¶
        - David Garlanå’ŒMaryShaw (An Introducti on to Software Architecture, January 1994 ) è¿™ä¸¤ä½è½¯ä»¶æ¶æ„å­¦ç§‘çš„å…ˆé©±å®šä¹‰äº†å¦‚ä¸‹[æ¶æ„é£æ ¼](https://www.cs.cmu.edu/afs/cs/project/able/ftp/intro_softarch/intro_softarch.pdf)
          collapsed:: true
          - > å› æ­¤ï¼Œæ¶æ„é£æ ¼æ ¹æ®ç»“æ„ç»„ç»‡æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—æ­¤ç±»ç³»ç»Ÿã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæ¶æ„é£æ ¼ç¡®å®šå¯ä»¥åœ¨è¯¥é£æ ¼çš„å®ä¾‹ä¸­ä½¿ç”¨çš„ç»„ä»¶å’Œè¿æ¥å™¨çš„è¯æ±‡è¡¨ï¼Œä»¥åŠå…³äºå¦‚ä½•ç»„åˆå®ƒä»¬çš„ä¸€ç»„çº¦æŸã€‚
            >
        - åˆ†å±‚å¼æ¶æ„é£æ ¼
          collapsed:: true
          - åˆ†å±‚æ¶æ„å°†è½¯ä»¶å…ƒç´ æŒ‰ "å±‚" çš„æ–¹å¼ç»„ç»‡
          - æ¯ä¸ªå±‚éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„èŒè´£
          - åˆ†å±‚æ¶æ„è¿˜é™åˆ¶äº†å±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»
            collapsed:: true
            - æ¯ä¸€å±‚åªèƒ½ä¾èµ–äºç´§é‚»å…¶ä¸‹æ–¹çš„å±‚ï¼ˆå¦‚æœä¸¥æ ¼åˆ†å±‚ï¼‰æˆ–å…¶ä¸‹é¢çš„ä»»ä½•å±‚
          - å¯ä»¥å°†åˆ†å±‚æ¶æ„åº”ç”¨äºå‰é¢è®¨è®ºçš„å››ä¸ªè§†å›¾ä¸­çš„ä»»ä½•ä¸€ä¸ª
          - æµè¡Œçš„ä¸‰å±‚æ¶æ„ (MVC, Controllerè´Ÿè´£MVçš„é€šä¿¡) æ˜¯åº”ç”¨äº**é€»è¾‘è§†å›¾**çš„åˆ†å±‚æ¶æ„
            collapsed:: true
            - å®ƒå°†åº”ç”¨ç¨‹åºçš„ç±»ç»„ç»‡åˆ°ä»¥ä¸‹å±‚ä¸­
              collapsed:: true
              - è¡¨ç°å±‚ (View)
                collapsed:: true
                - åŒ…å«å®ç°ç”¨æˆ·ç•Œé¢æˆ–å¤–éƒ¨API çš„ä»£ç 
              - ä¸šåŠ¡é€»è¾‘å±‚ (Model)
                collapsed:: true
                - åŒ…å«ä¸šåŠ¡é€»è¾‘
              - æ•°æ®æŒä¹…åŒ–å±‚ (Model Object)
                collapsed:: true
                - å®ç°ä¸æ•°æ®åº“äº¤äº’çš„é€»è¾‘
                - collapsed:: true
                  #+BEGIN_NOTE
                  æ˜æ˜¾çš„å¼Šç«¯
                  #+END_NOTE
                  - å•ä¸ªè¡¨ç°å±‚
                    collapsed:: true
                    - å®ƒæ— æ³•å±•ç°åº”ç”¨ç¨‹åºå¯èƒ½ä¸ä»…ä»…ç”± å•ä¸ªç³»ç»Ÿè°ƒç”¨çš„äº‹å®
                  - å•ä¸€æ•°æ®æŒä¹…åŒ–å±‚
                    collapsed:: true
                    - å®ƒæ— æ³•å±•ç°åº”ç”¨ç¨‹åºå¯èƒ½ä¸å¤šä¸ªæ•°æ®åº“è¿›è¡Œäº¤äº’çš„äº‹å®
                  - å°†ä¸šåŠ¡é€»è¾‘å±‚å®šä¹‰ä¸ºä¾èµ–åƒæ•°æ®æŒä¹…åŒ–å±‚
                    collapsed:: true
                    - ç†è®ºä¸Šï¼Œè¿™æ ·çš„ä¾èµ–æ€§ä¼šå¦¨ç¢ä½ åœ¨æ²¡æœ‰æ•°æ®åº“çš„æƒ…å†µä¸‹æµ‹è¯•ä¸šåŠ¡é€»è¾‘
                  - **é”™è¯¯åœ°è¡¨ç¤ºäº†ç²¾å¿ƒè®¾è®¡çš„åº”ç”¨ç¨‹åºä¸­çš„ä¾èµ–å…³ç³»**
                    collapsed:: true
                    - ä¸šåŠ¡é€»è¾‘é€šå¸¸å®šä¹‰æ•°æ®è®¿é—®æ–¹æ³•çš„æ¥å£æˆ–æ¥å£åº“
                    - æ•°æ®æŒä¹…åŒ–å±‚åˆ™å®šä¹‰äº†å®ç°å­˜å‚¨åº“æ¥å£çš„ DAOç±»
                      collapsed:: true
                      - æ¢å¥è¯è¯´ï¼Œä¾èµ–å…³ç³»ä¸åˆ†å±‚æ¶æ„æ‰€æè¿°çš„ç›¸å
        - å…­è¾¹å½¢æ¶æ„
          collapsed:: true
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670991548098_0.png)
          - åº”ç”¨ç¨‹åºå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå…¥ç«™é€‚é…å™¨ï¼Œè€Œä¸æ˜¯è¡¨ç¤ºå±‚
            collapsed:: true
            - å®ƒé€šè¿‡è°ƒç”¨ä¸šåŠ¡é€»è¾‘æ¥å¤„ç†æ¥è‡ªå¤–éƒ¨çš„è¯·æ±‚
          - åº”ç”¨ç¨‹åºå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå‡ºç«™é€‚é…å™¨ï¼Œè€Œä¸æ˜¯æ•°æ®æŒä¹…åŒ–å±‚
            collapsed:: true
            - è¿™äº›å‡ºç«™é€‚é…å™¨ç”±ä¸šåŠ¡é€»è¾‘è°ƒç”¨å¹¶è°ƒç”¨å¤–éƒ¨åº”ç”¨ç¨‹åº
          - æ­¤æ¶æ„çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§å’Œä¼˜ç‚¹
            collapsed:: true
            - **ä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–äºé€‚é…å™¨**
              collapsed:: true
              - ç›¸åï¼Œå„ç§é€‚é…å™¨éƒ½ä¾èµ–ä¸šåŠ¡é€»è¾‘
          - ä¸šåŠ¡é€»è¾‘å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç«¯å£ (portï¼‰
            collapsed:: true
            - ç«¯å£å®šä¹‰äº†ä¸€ç»„æ“ä½œï¼Œå…³äºä¸šåŠ¡é€»è¾‘å¦‚ä½•ä¸å¤–éƒ¨äº¤äº’
              collapsed:: true
              - ä¾‹å¦‚ï¼Œåœ¨Javaä¸­ï¼Œç«¯å£é€šå¸¸æ˜¯Javaæ¥å£ã€‚
            - æœ‰ä¸¤ç§ç«¯å£
              collapsed:: true
              - å…¥ç«™ç«¯å£
                collapsed:: true
                - ä¸šåŠ¡é€»è¾‘å…¬å¼€çš„API, å®ƒä½¿å¤–éƒ¨åº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨å®ƒ
                - å…¥ç«™ç«¯å£çš„ä¸€ä¸ªå®ä¾‹æ˜¯æœåŠ¡æ¥å£ï¼Œå®ƒå®šä¹‰æœåŠ¡çš„å…¬å…±æ–¹æ³•
              - å‡ºç«™ç«¯å£
                collapsed:: true
                - ä¸šåŠ¡é€»è¾‘è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿçš„æ–¹å¼
                - å‡ºç«™ç«¯å£çš„ä¸€ä¸ªå®ä¾‹æ˜¯å­˜å‚¨åº“æ¥å£ï¼Œå®ƒå®šä¹‰æ•°æ®è®¿é—®æ“ä½œçš„é›†åˆ
          - ä¸šåŠ¡é€»è¾‘çš„å‘¨å›´æ˜¯é€‚é…å™¨
            collapsed:: true
            - æœ‰ä¸¤ç§ç±»å‹çš„é€‚é…å™¨
              collapsed:: true
              - å…¥ç«™é€‚é…å™¨
                collapsed:: true
                - å…¥ç«™é€‚é…å™¨é€šè¿‡è°ƒç”¨å…¥ç«™ç«¯å£æ¥å¤„ç†æ¥è‡ªå¤–éƒ¨ä¸–ç•Œçš„è¯·æ±‚
                - å…¥ç«™é€‚é…å™¨çš„ä¸€ä¸ªå®ä¾‹æ˜¯ SpringMVC Controller,
                  collapsed:: true
                  - å®ƒå®ç°ä¸€ç»„ RESTæ¥å£ (endpoint) æˆ–ä¸€ç»„Webé¡µé¢
                - å¦ä¸€ä¸ªå®ä¾‹æ˜¯è®¢é˜…æ¶ˆæ¯çš„æ¶ˆæ¯ä»£ç†å®¢æˆ·ç«¯
                  collapsed:: true
                  - å¤šä¸ªå…¥ç«™é€‚é…å™¨å¯ä»¥è°ƒç”¨ç›¸åŒçš„å…¥ç«™ç«¯å£
              - å‡ºç«™é€‚é…å™¨
                collapsed:: true
                - å‡ºç«™é€‚é…å™¨å®ç°å‡ºç«™ç«¯å£ï¼Œå¹¶é€šè¿‡è°ƒç”¨å¤–éƒ¨åº”ç”¨ç¨‹åºæˆ–æœåŠ¡å¤„ç†æ¥è‡ªä¸šåŠ¡é€»è¾‘çš„è¯·æ±‚
                - 2 ä¸ªå®ä¾‹
                  collapsed:: true
                  - å®ç°è®¿é—®æ•°æ®åº“çš„æ“ä½œçš„æ•°æ®è®¿é—®å¯¹è±¡ ( DAO)ç±»
                  - è°ƒç”¨è¿œç¨‹æœåŠ¡çš„ä»£ç†ç±»ã€‚å‡ºç«™é€‚é…å™¨ä¹Ÿå¯ä»¥å‘å¸ƒäº‹ä»¶ã€‚
          - å¥½å¤„
            collapsed:: true
            - å°†ä¸šåŠ¡é€»è¾‘ä¸é€‚é…å™¨ä¸­åŒ…å«**çš„è¡¨ç¤ºå±‚å’Œæ•°æ®è®¿é—®å±‚çš„é€»è¾‘åˆ†ç¦»å¼€æ¥**
              collapsed:: true
              - ä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–äºè¡¨ç¤ºå±‚é€»è¾‘æˆ–æ•°æ®è®¿é—®å±‚é€»è¾‘
              - ç”±äºè¿™ç§åˆ†ç¦»ï¼Œ**å•ç‹¬æµ‹è¯•ä¸šåŠ¡é€»è¾‘è¦å®¹æ˜“å¾—å¤š**
            - å®ƒæ›´å‡†ç¡®åœ°åæ˜ äº†ç°ä»£åº”ç”¨ç¨‹åºçš„æ¶æ„
              collapsed:: true
              - å¯ä»¥é€šè¿‡å¤šä¸ªé€‚é…å™¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œæ¯ä¸ªé€‚é…å™¨å®ç°ç‰¹å®šçš„API æˆ–ç”¨æˆ·ç•Œé¢
              - ä¸šåŠ¡é€»è¾‘è¿˜å¯ä»¥è°ƒç”¨å¤šä¸ªé€‚é…å™¨ï¼Œæ¯ä¸ªé€‚é…å™¨è°ƒç”¨ä¸åŒçš„å¤–éƒ¨ç³»ç»Ÿã€‚å…­è¾¹å½¢æ¶æ„æ˜¯æè¿°å¾®æœåŠ¡æ¶æ„ä¸­æ¯ä¸ªæœåŠ¡çš„æ¶æ„çš„å¥½æ–¹æ³•
      - 2.1.3 å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„é£æ ¼
        collapsed:: true
        - å¾®æœåŠ¡æ¶æ„çš„å®ç°è§†å›¾ç”±å¤šä¸ªç»„ä»¶æ„æˆï¼šä¸€ç»„å¯æ‰§è¡Œæ–‡ä»¶æˆ– WARæ–‡ä»¶
          collapsed:: true
          - å•ä½“æ¨¡å¼: [Monolithic Architecture pattern](https://microservices.io/patterns/monolithic.html)
            collapsed:: true
            - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670993623992_0.png)
          - å¾®æœåŠ¡æ¨¡å¼: [Microservice Architecture pattern](https://microservices.io/patterns/microservices.html)
            collapsed:: true
            - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670993647342_0.png)
              collapsed:: true
              - Related
                collapsed:: true
                - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670993811612_0.png)
        - å¾®æœåŠ¡æ¶æ„çš„ç»„ä»¶æ˜¯æœåŠ¡ï¼Œè¿æ¥å™¨æ˜¯ä½¿è¿™äº›æœåŠ¡èƒ½å¤Ÿåä½œçš„é€šä¿¡åè®®
          collapsed:: true
          - æ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„é€»è¾‘è§†å›¾æ¶æ„ï¼Œé€šå¸¸ä¹Ÿæ˜¯å…­è¾¹å½¢æ¶æ„
        - FTGO åº”ç”¨ç¨‹åºå¯èƒ½çš„å¾®æœåŠ¡æ¶æ„
          collapsed:: true
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670997157617_0.png)
          - æ­¤æ¶æ„ä¸­çš„æœåŠ¡å¯¹åº”äºä¸šåŠ¡åŠŸèƒ½ï¼Œä¾‹å¦‚è®¢å•ç®¡ç†å’Œé¤é¦†ç®¡ç†
        - æœåŠ¡
          collapsed:: true
          - æœåŠ¡æ˜¯ä¸€ä¸ªå•ä¸€çš„ã€å¯ç‹¬ç«‹éƒ¨ç½²çš„è½¯ä»¶ç»„ä»¶ï¼Œå®ƒå®ç°äº†ä¸€äº›æœ‰ç”¨çš„åŠŸèƒ½ã€‚
            collapsed:: true
            - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670997366838_0.png)
              collapsed:: true
              - æ˜¾ç¤ºäº†æœåŠ¡çš„å¤–éƒ¨è§†å›¾ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­æ˜¯ Order Service
              - æœåŠ¡å…·æœ‰ API , ä¸ºå…¶å®¢æˆ·ç«¯æä¾›å¯¹åŠŸèƒ½çš„è®¿é—®
                collapsed:: true
                - API ç”±å‘½ä»¤ã€æŸ¥è¯¢å’Œäº‹ä»¶ç»„æˆ
                - å‘½ä»¤å¦‚ createOrder() æ‰§è¡Œæ“ä½œå¹¶æ›´æ–°æ•°æ®
                - æŸ¥è¯¢å¦‚ findOrderByid() æ£€ç´¢æ•°æ®
              - æœ‰ä¸¤ç§ç±»å‹çš„æ“ä½œ
                collapsed:: true
                - å‘½ä»¤
                - æŸ¥è¯¢
              - æœåŠ¡è¿˜å‘å¸ƒç”±å…¶å®¢æˆ·ç«¯ä½¿ç”¨çš„äº‹ä»¶ï¼Œä¾‹å¦‚ OrderCreated
          - æœåŠ¡çš„ API å°è£…äº†å…¶å†…éƒ¨å®ç°ã€‚
            collapsed:: true
            - ä¸å•ä½“æ¶æ„ä¸åŒï¼Œå¼€å‘äººå‘˜æ— æ³•ç»•è¿‡æœåŠ¡çš„ APIç›´æ¥è®¿é—®æœåŠ¡å†…éƒ¨çš„æ–¹æ³•æˆ–æ•°æ®ã€‚å› æ­¤ï¼Œå¾®æœåŠ¡æ¶æ„å¼ºåˆ¶å®ç°äº†åº”ç”¨ç¨‹åºçš„æ¨¡å—åŒ–ã€‚
          - å¾®æœåŠ¡æ¶æ„ä¸­çš„æ¯é¡¹æœåŠ¡éƒ½æœ‰è‡ªå·±çš„æ¶æ„ï¼Œå¯èƒ½è¿˜æœ‰ç‹¬ç‰¹çš„æŠ€æœ¯æ ˆã€‚
            collapsed:: true
            - ä½†æ˜¯å…¸å‹çš„æœåŠ¡å¾€å¾€éƒ½å…·æœ‰å…­è¾¹å½¢æ¶æ„
              collapsed:: true
              - å…¶API ç”±ä¸æœåŠ¡çš„ä¸šåŠ¡é€»è¾‘äº¤äº’çš„é€‚é…å™¨å®ç°
            - æ“ä½œé€‚é…å™¨è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œäº‹ä»¶é€‚é…å™¨å¯¹å¤–å‘å¸ƒä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„äº‹ä»¶ã€‚
        - æ¾è€¦åˆ Loose coupling
          collapsed:: true
          - æœåŠ¡ä¹‹é—´çš„äº¤äº’é‡‡ç”¨ API å®Œæˆï¼Œè¿™æ ·åšå°±å°è£…äº†æœåŠ¡çš„å®ç°ç»†èŠ‚ã€‚
            collapsed:: true
            - è¿™å…è®¸æœåŠ¡åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹ï¼Œå¯¹å®ç°æ–¹å¼åšå‡ºä¿®æ”¹ã€‚æ¾è€¦åˆæœåŠ¡æ˜¯æ”¹å–„å¼€å‘æ•ˆç‡ã€æå‡å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§çš„å…³é”®ã€‚å°çš„ã€æ¾è€¦åˆçš„æœåŠ¡æ›´å®¹æ˜“è¢«ç†è§£ã€ä¿®æ”¹å’Œæµ‹è¯•ã€‚æˆ‘ä»¬é€šè¿‡ API æ¥å®ç°æ¾è€¦åˆæœåŠ¡ä¹‹é—´çš„åè°ƒè°ƒç”¨ï¼Œè¿™æ ·å°±é¿å…äº†å¤–ç•Œå¯¹æœåŠ¡çš„æ•°æ®åº“çš„
          - ç›´æ¥è®¿é—®å’Œè°ƒç”¨
            collapsed:: true
            - æœåŠ¡è‡ªèº«çš„å¾…ä¹…åŒ–æ•°æ®å°±å¦‚åŒç±»çš„ç§æœ‰å±æ€§ä¸€æ ·ï¼Œæ˜¯ä¸å¯¹å¤–çš„ã€‚ä¿è¯æ•°æ®çš„ç§æœ‰å±æ€§æ˜¯å®ç°æ¾è€¦åˆçš„å‰æä¹‹ä¸€ã€‚è¿™æ ·åšï¼Œå°±å…è®¸å¼€å‘è€…ä¿®æ”¹æœåŠ¡çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸ç”¨æå‰ä¸å…¶ä»–æœåŠ¡çš„å¼€å‘è€…äº’ç›¸åå•†ã€‚è¿™æ ·åšåœ¨è¿è¡Œæ—¶ä¹Ÿå®ç°äº†æ›´å¥½çš„éš”ç¦»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœåŠ¡çš„æ•°æ®åº“åŠ é”ä¸ä¼šå½±å“å¦å¤–çš„æœåŠ¡ã€‚ä½†æ˜¯ä½ ç¨åå°±ä¼šçœ‹åˆ°åœ¨æœåŠ¡é—´ä¸å…±äº«æ•°æ®åº“çš„å¼Šç«¯, ç‰¹åˆ«æ˜¯å¤„ç†æ•°æ®ä¸€è‡´æ€§å’Œè·¨æœåŠ¡æŸ¥è¯¢éƒ½å˜å¾—æ›´ä¸ºå¤æ‚
        - å…±äº«ç±»åº“çš„è§’è‰²
        - æœåŠ¡çš„å¤§å°å¹¶ä¸é‡è¦
          collapsed:: true
          - ç›®æ ‡ä¸æ˜¯ä¸€ä¸ª "å¾®" å­—, æ›´å¥½çš„ç›®æ ‡æ˜¯
            collapsed:: true
            - **å°†ç²¾å¿ƒè®¾è®¡çš„æœåŠ¡å®šä¹‰ä¸ºèƒ½å¤Ÿç”±å°å›¢é˜Ÿå¼€å‘çš„æœåŠ¡ï¼Œå¹¶ä¸”äº¤ä»˜æ—¶é—´æœ€çŸ­ï¼Œä¸å…¶ä»–å›¢é˜Ÿåä½œæœ€å°‘**
              collapsed:: true
              - ç†è®ºä¸Šï¼Œå›¢é˜Ÿå¯èƒ½åªè´Ÿè´£å•ä¸€æœåŠ¡ï¼Œå› æ­¤æœåŠ¡ç»ä¸æ˜¯å¾®å°çš„ã€‚ç›¸åï¼Œå¦‚æœæœåŠ¡éœ€è¦å¤§å‹å›¢é˜Ÿæˆ–éœ€è¦å¾ˆé•¿æ—¶é—´è¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆæ‹†åˆ†å›¢é˜Ÿæˆ–æœåŠ¡å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¦å¤–ï¼Œå¦‚æœä½ å› ä¸ºå…¶ä»–æœåŠ¡çš„å˜æ›´è€Œä¸æ–­éœ€è¦åŒæ­¥æ›´æ–°è‡ªå·±è´Ÿè´£çš„æœåŠ¡ï¼Œæˆ–è€…ä½ æ‰€è´Ÿè´£çš„æœåŠ¡æ­£åœ¨è§¦å‘å…¶ä»–æœåŠ¡çš„åŒæ­¥æ›´æ–°ï¼Œé‚£ä¹ˆè¿™è¡¨æ˜æœåŠ¡æ²¡æœ‰å®ç°æ¾è€¦åˆã€‚ä½ æ„å»ºçš„ç”šè‡³å¯èƒ½æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„å•ä½“ã€‚
          - å¾®æœåŠ¡æ¶æ„æŠŠåº”ç”¨ç¨‹åºé€šè¿‡ä¸€äº›å°çš„ã€æ¾è€¦åˆçš„æœåŠ¡ç»„ç»‡åœ¨ä¸€èµ·ã€‚ç»“æœï¼Œè¿™æ ·çš„æ¶æ„æå‡äº†å¼€å‘é˜¶æ®µçš„æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯å¯ç»´æŠ¤æ€§ã€å¯æµ‹è¯•æ€§å’Œå¯éƒ¨ç½²æ€§ï¼Œè¿™ä¹Ÿå°±è®©ç»„ç»‡çš„è½¯ä»¶å¼€å‘é€Ÿåº¦æ›´å¿«ã€‚å¾®æœåŠ¡æ¶æ„ä¹ŸåŒæ—¶æå‡äº†åº”ç”¨ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼Œå°½ç®¡è¿™ä¸æ˜¯å¾®æœåŠ¡çš„ä¸»è¦ç›®æ ‡ã€‚ä¸ºäº†ä½¿ç”¨å¾®æœåŠ¡æ¶æ„å¼€å‘è½¯ä»¶ï¼Œä½ é¦–å…ˆéœ€è¦è¯†åˆ«æœåŠ¡ï¼Œå¹¶ç¡®å®šå®ƒä»¬ä¹‹é—´å¦‚ä½•åä½œã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®šä¹‰ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¾®æœåŠ¡æ¶æ„ã€‚
    - 2.2 ä¸ºåº”ç”¨ç¨‹åºå®šä¹‰å¾®æœåŠ¡æ¶æ„
      - ä¸‰æ­¥å¼æµç¨‹
        collapsed:: true
        - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1670998184381_0.png)
        - 1.å®šä¹‰ç³»ç»Ÿæ“ä½œ
          collapsed:: true
          - ä¸æ˜¯æ ¹æ®ç‰¹å®šçš„è¿›ç¨‹é—´é€šä¿¡æŠ€æœ¯ï¼ˆå¦‚ REST æˆ–æ¶ˆæ¯ï¼‰æ¥æè¿°è¿™äº›è¯·æ±‚ï¼Œè€Œæ˜¯**ä½¿ç”¨æ›´æŠ½è±¡çš„ç³»ç»Ÿæ“ä½œ**è¿™ä¸ªæ¦‚å¿µ
            collapsed:: true
            - ç³»ç»Ÿæ“ä½œ (system operation ) æ˜¯åº”ç”¨ç¨‹åºå¿…é¡»å¤„ç†çš„è¯·æ±‚çš„ä¸€ç§æŠ½è±¡æè¿°ã€‚å®ƒæ—¢å¯ä»¥æ˜¯æ›´æ–°æ•°æ®çš„å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢ã€‚æ¯ä¸ªå‘½ä»¤çš„è¡Œä¸ºéƒ½æ˜¯æ ¹æ®æŠ½è±¡é¢†åŸŸæ¨¡å‹å®šä¹‰çš„ï¼ŒæŠ½è±¡é¢†åŸŸæ¨¡å‹ä¹Ÿæ˜¯ä»éœ€æ±‚ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚ç³»ç»Ÿæ“ä½œæ˜¯æè¿°æœåŠ¡ä¹‹é—´åä½œæ–¹å¼çš„æ¶æ„åœºæ™¯ã€‚
        - 2.å®šä¹‰æœåŠ¡
          collapsed:: true
          - æœ‰å‡ ç§ç­–ç•¥å¯ä¾›é€‰æ‹©, ä½†ç­–ç•¥çš„æœ€ç»ˆç»“æœéƒ½æ˜¯å›´ç»•ä¸šåŠ¡æ¦‚å¿µè€ŒéæŠ€æœ¯æ¦‚å¿µåˆ†è§£å’Œè®¾è®¡çš„æœåŠ¡
            collapsed:: true
            - å®šä¹‰ä¸ä¸šåŠ¡èƒ½åŠ›ç›¸å¯¹åº”çš„æœåŠ¡
              collapsed:: true
              - ä¸€ç§æºäºä¸šåŠ¡æ¶æ„å­¦æ´¾çš„ç­–ç•¥
            - å›´ç»•é¢†åŸŸé©±åŠ¨è®¾è®¡çš„å­åŸŸæ¥åˆ†è§£å’Œè®¾è®¡æœåŠ¡
              collapsed:: true
              - collapsed:: true
                > If we use _domain-driven design subdomains_(é¢†åŸŸé©±åŠ¨è®¾è®¡çš„å­åŸŸ) to decompose and design services, the example would change to reflect the subdomains that are relevant to the domain of the e-commerce website.
                > For example, we might identify subdomains such as search, checkout, and delivery within the domain of the e-commerce website.
                > Then, we would design services that correspond to each of these subdomains, such as a search service for handling product searches, a checkout service for handling purchases, and a delivery service for handling product deliveries.
                > This approach would allow us to manage and use these services in a way that is aligned with the subdomains of the domain, and it could potentially improve the efficiency of the e-commerce website.
                > #chatGPT
                >
        - 3.å®šä¹‰æœåŠ¡ API å’Œåä½œæ–¹å¼
          collapsed:: true
          - å°† 1 ä¸­æ ‡è¯†çš„æ¯ä¸ªç³»ç»Ÿæ“ä½œåˆ†é…ç»™æœåŠ¡
            collapsed:: true
            - æœåŠ¡å¯ä»¥å®Œå…¨ç‹¬ç«‹åœ°å®ç°æ“ä½œ
            - éœ€è¦ä¸å…¶ä»–æœåŠ¡åä½œ
              collapsed:: true
              - ç¡®å®šæœåŠ¡çš„åä½œæ–¹å¼
                collapsed:: true
                - å¦å¤–ä¸€ä¸ªæœåŠ¡æ¥æ”¯æŒå…¶ä»–æ“ä½œ
                  collapsed:: true
                  - è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶
          - æœåŠ¡çš„åˆ†è§£æœ‰ 4 ä¸ªéšœç¢éœ€è¦å…‹æœ
            collapsed:: true
            - 1.ç½‘ç»œå»¶è¿Ÿ
              collapsed:: true
              - æœåŠ¡ä¹‹é—´çš„ç½‘ç»œå¾€è¿”å¤ªå¤šï¼Œç‰¹å®šçš„åˆ†è§£å°†æ˜¯ä¸åˆ‡å®é™…çš„
                collapsed:: true
                - ==ä¼˜åŒ–ä¸‹æ¥çš„æ—¶é—´å…¨ç ¸åˆ°ç½‘ç»œå»¶æ—¶äº†, è¿½å¹³ç”šè‡³åè¶…==
            - 2.æœåŠ¡ä¹‹é—´çš„åŒæ­¥é€šä¿¡é™ä½äº†å¯ç”¨æ€§
              collapsed:: true
              - ä½ å¯èƒ½éœ€è¦ä½¿ç”¨ç¬¬ 3 ç« ä¸­æè¿°çš„è‡ªåŒ…å«æœåŠ¡çš„æ¦‚å¿µ
            - 3.éœ€è¦ç»´æŠ¤è·¨æœåŠ¡çš„æ•°æ®ä¸€è‡´æ€§
              collapsed:: true
              - ä½ éœ€è¦ä½¿ç”¨ç¬¬ 4 ç« ä¸­è®¨è®ºçš„ Saga
            - 4.æ‰€è°“çš„ä¸Šå¸ç±» (GodClass)
              collapsed:: true
              - å®ƒå¹¿æ³›åº”ç”¨åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­
                collapsed:: true
                - ä½¿ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸­çš„æ¦‚å¿µæ¥æ¶ˆé™¤ä¸Šå¸ç±»
                  collapsed:: true
                  - collapsed:: true
                    > This means defining clear boundaries for different parts of the system and the language used to describe them. This can help to prevent a single class from becoming overly large and unmanageable. Additionally, using the concept of aggregation and small, focused classes can also help to prevent the formation of a God class.
                    > #chatGPT
                    >
      - 2.2.1 è¯†åˆ«ç³»ç»Ÿæ“ä½œ
        - ä¸¤æ­¥å¼æµç¨‹è¯†åˆ«å’Œå®šä¹‰ç³»ç»Ÿæ“ä½œ
          collapsed:: true
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671018016495_0.png)
            collapsed:: true
            - è¿™ä¸ªæµç¨‹çš„çµæ„Ÿæ¥è‡ªCraigLannançš„åè‘—ã€ŠApplyingUML and Patternsã€‹(Prentice Hall, 2004) ä¸­ä»‹ç»çš„[é¢å‘å¯¹è±¡è®¾è®¡è¿‡ç¨‹](http://www.craiglarman.com/wiki/index.php?title=Book_Applying_UML_and_Patterns)
          - 1.åˆ›å»ºç”±å…³é”®ç±»ç»„æˆçš„**æŠ½è±¡é¢†åŸŸæ¨¡å‹**ï¼Œè¿™äº›å…³é”®ç±»æä¾›ç”¨äºæè¿°ç³»ç»Ÿæ“ä½œçš„è¯æ±‡è¡¨
          - 2.ç¡®å®šç³»ç»Ÿæ“ä½œï¼Œå¹¶æ ¹æ®é¢†åŸŸæ¨¡å‹æè¿°æ¯ä¸ªç³»ç»Ÿæ“ä½œçš„è¡Œä¸º
        - 2.2.1.1 åˆ›å»ºæŠ½è±¡é¢†åŸŸæ¨¡å‹
          id:: 639996a4-5935-462f-9bf4-ce89250749fb
          collapsed:: true
          - é€šè¿‡ä¸é¢†åŸŸä¸“å®¶æ²Ÿé€šåï¼Œåˆ†æç”¨æˆ·æ•…äº‹å’Œåœºæ™¯ä¸­é¢‘ç¹å‡ºç°çš„åè¯
            collapsed:: true
            - id:: 6399b951-0ae3-4dbc-826e-4cd1210c9445
              collapsed:: true
              ```shell
              # Place Order
              Given a consumer 
              	And a restaurant
                  And a delivery address/time that can be served by that restaurant
                  And an order total that meets the restaurant''s order minimum
              When the consumer places an order for the restaurant
              Then consumer''s credit card is authorized
              	And an order is created in the PENDING ACCEPTANCE state
                  And the order is associated with the consumer
                  And the order is associated with the restaurant
              # Consumer, Order, Restaurant å’Œ CredtCard, æš—ç¤ºäº†è¿™äº›ç±»éƒ½æ˜¯éœ€è¦çš„
              ```
            - id:: 6399d7ae-6acc-4a32-bb44-be3cb996cfbf
              collapsed:: true
              ```shell
              # Accept Order
              Given an order that is in the PENDING ACCEPTANCE state
              	and a courier that is available to deliver the order
              When a restaurant accepts an order with a promise to prepare by a particular
              	time
              Then the state of the order is changed to ACCEPTED
              	And the order''s promiseByTime is updated to the promised time
                  And the courier is assigned to deliver the order
              ```
            - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671018988833_0.png)
        - 2.2.1.2 å®šä¹‰ç³»ç»Ÿæ“ä½œ
          id:: 639996a5-4b45-46b9-b60c-15648899453a
          collapsed:: true
          - æœ‰ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„ç³»ç»Ÿæ“ä½œ
            collapsed:: true
            - å‘½ä»¤å‹
              collapsed:: true
              - åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®çš„ç³»ç»Ÿæ“ä½œ
            - æŸ¥è¯¢å‹
              collapsed:: true
              - æŸ¥è¯¢å’Œè¯»å–æ•°æ®çš„ç³»ç»Ÿæ“ä½œ
          - è¯†åˆ«ç³»ç»ŸæŒ‡ä»¤çš„åˆ‡å…¥ç‚¹æ˜¯åˆ†æç”¨æˆ·æ•…äº‹å’Œåœºæ™¯ä¸­çš„åŠ¨è¯
            collapsed:: true
            - å¾ˆå¤šç”¨æˆ·æ•…äº‹éƒ½ä¼šç›´æ¥å¯¹åº”æˆ–æ˜ å°„ä¸ºç³»ç»Ÿå‘½ä»¤
            - åˆ—å‡ºäº†ä¸€äº›å…³é”®çš„ç³»ç»Ÿå‘½ä»¤
              collapsed:: true
              - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671025463172_0.png)
                collapsed:: true
                FTGOåº”ç”¨ç¨‹åºçš„é‡è¦ç³»ç»Ÿå‘½ä»¤
                - collapsed:: true
                  | :--------: | :--------------------: | :-----------------------: | :------------------------------------------------: |
                  |  Consumer  |      Create Order      |       createOrder()       |                    åˆ›å»ºä¸€ä¸ªè®¢å•                    |
                  | Restaurant |      Accept Order      |       acceptOrder()       | è¡¨ç¤ºé¤é¦†æ¥å—äº†è®¢å•,[:br]å¹¶æ‰¿è¯ºåœ¨è§„å®šçš„æ—¶é—´å‡†å¤‡å®Œæ¯• |
                  | Restaurant | Order Ready for Pickup | noteOrderReadyForPickup() |           è¡¨ç¤ºè®¢å•å·²ç»å‡†å¤‡å®Œæ¯•,å¯ä»¥é€é¤           |
                  |  Courier  |    Update Location    |   noteUpdatedLocation()   |                æ›´æ–°é€é¤å‘˜çš„å½“å‰ä½ç½®                |
                  |  Courier  |   Delivery picked up   |  noteDeliveryPickedUp()  |                 è¡¨ç¤ºé€é¤å‘˜å·²ç»å–é¤                 |
                  |  Courier  |   Delivery delivered   |  noteDeliveryDelivered()  |                 è¡¨ç¤ºé€é¤å‘˜å·²ç»é€é¤                 |
          - å®ç°æŒ‡ä»¤è§„èŒƒ
            collapsed:: true
            - å‘½ä»¤è§„èŒƒå®šä¹‰äº†å‘½ä»¤å¯¹åº”çš„å‚æ•°ã€è¿”å›å€¼å’Œé¢†åŸŸæ¨¡å‹ç±»çš„è¡Œä¸ºã€‚
            - è¡Œä¸ºè§„èŒƒä¸­åŒ…æ‹¬å‰ç½®æ¡ä»¶ï¼ˆå³å½“è¿™ä¸ªæ“ä½œè¢«è°ƒç”¨æ—¶å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼‰å’Œåç½®æ¡ä»¶ï¼ˆå³è¿™ä¸ªæ“ä½œè¢«è°ƒç”¨åå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼‰
              collapsed:: true
              - createOrder() ç³»ç»Ÿæ“ä½œçš„è§„èŒƒ
                collapsed:: true
                - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671025749343_0.png)
                  collapsed:: true
                  - å½“ç³»ç»Ÿæ“ä½œè¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥å‰ç½®æ¡ä»¶ï¼Œæ‰§è¡Œæ“ä½œæ¥å®Œæˆå’Œæ»¡è¶³åç½®æ¡ä»¶
                  - å‰ç½®æ¡ä»¶å¯¹åº”ç€Place Order ç”¨æˆ·åœºæ™¯ä¸­çš„ givens
                    collapsed:: true
                    åç½®æ¡ä»¶å¯¹åº”ç€åœºæ™¯ä¸­çš„Then
                    - ((6399b951-0ae3-4dbc-826e-4cd1210c9445))
              - acceptOrder () çš„ç³»ç»Ÿæ“ä½œè§„èŒƒ
                collapsed:: true
                - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671026200550_0.png)
                - ((6399d7ae-6acc-4a32-bb44-be3cb996cfbf))
          - å®ç°æŸ¥è¯¢
            collapsed:: true
            - ç”¨æˆ·è¿‡ç¨‹
              - ```
                1.ç”¨æˆ·è¾“äººé€é¤åœ°å€å’ŒæœŸæœ›çš„é€é¤æ—¶é—´
                2.ç³»ç»Ÿæ˜¾ç¤ºå½“å‰å¯ç”¨çš„é¤é¦†
                3.ç”¨æˆ·é€‰æ‹©é¤é¦†ï¼›
                4.ç³»ç»Ÿæ˜¾ç¤ºé¤é¦†çš„èœå•
                5.ç”¨æˆ·ç‚¹é¤å¹¶ç»“è´¦ï¼›
                6.ç³»ç»Ÿåˆ›å»ºè®¢å•ã€‚
                ```
              - ```shell
                findAvailableRestaurants(deliveryAddress, deliveryTime) 
                # è·å–æ‰€æœ‰èƒ½å¤Ÿé€é¤åˆ°ç”¨æˆ·åœ°å€å¹¶æ»¡è¶³é€é¤æ—¶é—´è¦æ±‚çš„é¤é¦†ã€‚
                findRestaurantMenu(id)
                #è¿”å›é¤é¦†ä¿¡æ¯å’Œè¿™å®¶é¤é¦†çš„èœå•é¡¹ã€‚
                ```
                - ç¬¬1ä¸ªåŒ…å«äº†åŒ…å«äº†åœ°ç†ä½ç½®ç­‰ä¿¡æ¯çš„å¤æ‚æŸ¥è¯¢, æ€§èƒ½éå¸¸é‡è¦
                - ...
        - ((639996a4-5935-462f-9bf4-ce89250749fb)) & ((639996a5-4b45-46b9-b60c-15648899453a)) å›ç­”äº†**åº”ç”¨"åšä»€ä¹ˆ"**
          - æœ‰åŠ©äºæ¨åŠ¨åº”ç”¨ç¨‹åºçš„æ¶æ„è®¾è®¡
          - æ¯ä¸€ä¸ª**ç³»ç»Ÿæ“ä½œçš„è¡Œä¸º**éƒ½é€šè¿‡é¢†åŸŸæ¨¡å‹çš„æ–¹å¼æ¥æè¿°
          - æ¯ä¸€ä¸ªé‡è¦çš„ç³»ç»Ÿæ“ä½œéƒ½å¯¹åº”ç€æ¶æ„å±‚é¢çš„ä¸€ä¸ªé‡å¤§**åœºæ™¯**ï¼Œæ˜¯æ¶æ„ä¸­éœ€è¦è¯¦ç»†æè¿°å’Œç‰¹åˆ«è€ƒè™‘çš„åœ°æ–¹
      - 2.2.2 æ ¹æ®ä¸šåŠ¡èƒ½åŠ›è¿›è¡ŒæœåŠ¡æ‹†åˆ†
        mark:: **åˆ›å»ºå¾®æœåŠ¡æ¶æ„çš„ç­–ç•¥ä¹‹ä¸€**
        url:: [Decompose by business capability](https://microservices.io/patterns/decomposition/decompose-by-business-capability.html)
        - ä¸šåŠ¡èƒ½åŠ›
          - ä¸€ä¸ªæ¥è‡ªäºä¸šåŠ¡æ¶æ„å»ºæ¨¡çš„æœ¯è¯­
          - æŒ‡ä¸€äº›èƒ½å¤Ÿä¸ºå…¬å¸ï¼ˆæˆ–ç»„ç»‡ï¼‰äº§ç”Ÿä»·å€¼çš„å•†ä¸šæ´»åŠ¨
          - ç‰¹å®šä¸šåŠ¡çš„ä¸šåŠ¡èƒ½åŠ›å–å†³äºè¿™ä¸ªä¸šåŠ¡çš„ç±»å‹
            - ä¾‹å¦‚ï¼Œä¿é™©å…¬å¸ä¸šåŠ¡èƒ½åŠ›é€šå¸¸åŒ…æ‹¬æ‰¿ä¿ã€ç†èµ”ç®¡ç†ã€è´¦åŠ¡å’Œåˆè§„ç­‰
            - åœ¨çº¿å•†åº—çš„ä¸šåŠ¡èƒ½åŠ›åŒ…æ‹¬ï¼šè®¢å•ç®¡ç†ã€åº“å­˜ç®¡ç†å’Œå‘è´§ï¼Œç­‰ç­‰
        - <`<Stop>`>
      - 2.2.3 æ ¹æ®å­åŸŸè¿›è¡ŒæœåŠ¡æ‹†åˆ†
      - 2.2.4 æ‹†åˆ†çš„æŒ‡å¯¼åŸåˆ™
      - 2.2.5 æ‹†åˆ†å•ä½“åº”ç”¨ä¸ºæœåŠ¡çš„éš¾ç‚¹
      - 2.2.6 å®šä¹‰æœåŠ¡API
  - ç¬¬3ç«  å¾®æœåŠ¡æ¶æ„ä¸­çš„è¿›ç¨‹é—´é€šä¿¡
    - 3.1 å¾®æœåŠ¡æ¶æ„ä¸­çš„è¿›ç¨‹é—´é€šä¿¡æ¦‚è¿°
      collapsed:: true
      - é€šä¿¡æœºåˆ¶
        collapsed:: true
        - åŸºäºåŒæ­¥è¯·æ±‚/å“åº”çš„é€šä¿¡æœºåˆ¶
          collapsed:: true
          - ä¾‹å¦‚ HTTP REST æˆ–gRPC
        - å¼‚æ­¥çš„åŸºäºæ¶ˆæ¯çš„é€šä¿¡æœºåˆ¶
          collapsed:: true
          - æ¯”å¦‚ AMQP æˆ– STOMP
        - ....
      - æ¶ˆæ¯çš„æ ¼å¼
        collapsed:: true
        - å…·å¤‡å¯è¯»æ€§çš„æ ¼å¼
          collapsed:: true
          - æ¯”å¦‚åŸºäºæ–‡æœ¬çš„JSON æˆ– XML
        - æ›´åŠ é«˜æ•ˆçš„ã€åŸºäºäºŒè¿›åˆ¶çš„ Avro æˆ– Protocol Buffers æ ¼å¼
        - ....
      - 3.1.1 äº¤äº’æ–¹å¼
        collapsed:: true
        - æœ‰å¤šç§å®¢æˆ·ç«¯ä¸æœåŠ¡çš„äº¤äº’æ–¹å¼, å®ƒä»¬å¯ä»¥åˆ†ä¸º2ä¸ªç»´åº¦
          collapsed:: true
          - collapsed:: true
            
            1. **1 v 1** & **1 v n**
            - **1 v 1**: æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ç”±ä¸€ä¸ªæœåŠ¡å®ä¾‹æ¥å¤„ç†
            - **1 v n**: æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ç”±å¤šä¸ªæœåŠ¡å®ä¾‹æ¥å¤„ç†
              collapsed:: true
              - ä¸€å¯¹å¤šçš„äº¤äº’æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹
                collapsed:: true
                - å‘å¸ƒ / è®¢é˜…æ–¹å¼ (publish/subscribe)
                  id:: 639a859b-7b56-4a36-a5db-f8d4d8cead03
                  collapsed:: true
                  - å®¢æˆ·ç«¯å‘å¸ƒé€šçŸ¥æ¶ˆæ¯ï¼Œè¢«é›¶ä¸ªæˆ–è€…å¤šä¸ªæ„Ÿå…´è¶£çš„æœåŠ¡è®¢é˜…
                - å‘å¸ƒ / å¼‚æ­¥å“åº”æ–¹å¼ (publish/asynchronous)
                  id:: 32f50700-a0b4-48b9-9cde-f847149926d4
                  collapsed:: true
                  - å®¢æˆ·ç«¯å‘å¸ƒè¯·æ±‚æ¶ˆæ¯ï¼Œç„¶åç­‰å¾…ä»æ„Ÿå…´è¶£çš„æœåŠ¡å‘å›çš„å“åº”
                - ((639a859b-7b56-4a36-a5db-f8d4d8cead03)) #vs ((32f50700-a0b4-48b9-9cde-f847149926d4))
                  collapsed:: true
                  - collapsed:: true
                    > in the publish/subscribe model, subscribers do not need to provide a callback address to the message broker. Instead, they simply subscribe to messages of a certain type and the message broker will notify them when a relevant message is received. In contrast, in the publish/asynchronous response model, subscribers must provide a callback address to the message broker, allowing the message broker to send messages directly to the subscriber's callback address when a relevant message is received. This allows subscribers to receive messages asynchronously, potentially improving the overall throughput of the system.
                    > #chatGPT
                    >
                    - Callback function
                      collapsed:: true
                      - > A callback function is a function that is passed as an argument to another function and is executed after some kind of event or action occurs. Callback functions are important because they allow for asynchronous programming, allowing a program to continue running without being blocked while waiting for some other action to complete. In this way, callback functions can help improve the performance and responsiveness of a program.
                        > While a callback function can often be replaced by a regular function, this may not always be the case. In some situations, the use of a callback function may be necessary in order to achieve the desired behavior or functionality. For example, if a program needs to perform some action after an event occurs, a callback function may be the only way to ensure that the action is executed at the right time. In general, the use of callback functions can help make a program more flexible and efficient.
                        >
          - collapsed:: true
            2. **åŒæ­¥** or **å¼‚æ­¥**
            ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671028103659_0.png)
            - è¯·æ±‚ / å“åº”
              collapsed:: true
              - ä¸€ä¸ªå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œç­‰å¾…å“åº”
              - å®¢æˆ·ç«¯æœŸæœ›æœåŠ¡ç«¯å¾ˆå¿«å°±ä¼šå‘é€å“åº”
              - åœ¨ä¸€ä¸ªåŸºäºçº¿ç¨‹çš„åº”ç”¨ä¸­ï¼Œç­‰å¾…è¿‡ç¨‹å¯èƒ½é€ æˆçº¿ç¨‹é˜»å¡
              - #+BEGIN_WARNING
                è¿™æ ·çš„æ–¹å¼ä¼šå¯¼è‡´æœåŠ¡çš„ç´§è€¦åˆ
                #+END_WARNING
            - å¼‚æ­¥è¯·æ±‚ / å“åº”
              collapsed:: true
              - å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¼‚æ­¥å“åº”è¯·æ±‚
              - å®¢æˆ·ç«¯åœ¨ç­‰å¾…å“åº”æ—¶ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œå› ä¸ºæœåŠ¡ç«¯çš„å“åº”ä¸ä¼šé©¬ä¸Šå°±è¿”å›
            - å•å‘é€šçŸ¥
              collapsed:: true
              - å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€åˆ°æœåŠ¡ç«¯ï¼Œä½†æ˜¯å¹¶ä¸æœŸæœ›æœåŠ¡ç«¯åšå‡ºä»»ä½•å“åº”
            - #+BEGIN_NOTE
              äº¤äº’æ–¹å¼å¹¶ä¸ä¼šå› ä¸ºå…·ä½“çš„è¿›ç¨‹é—´é€šä¿¡æŠ€æœ¯è€Œå‘ç”Ÿæ”¹å˜
              #+END_NOTE
            - ä¸€å¯¹å¤šçš„äº¤äº’æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹
      - 3.1.2 åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®šä¹‰API
      - 3.1.3 APIçš„æ¼”åŒ–
        collapsed:: true
        - è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
        - è¿›è¡Œæ¬¡è¦å¹¶ä¸”å‘åå…¼å®¹çš„æ”¹å˜
          collapsed:: true
          - å‘åå…¼å®¹çš„æ›´æ”¹
            collapsed:: true
            - å¯¹ API çš„é™„åŠ æ›´æ”¹æˆ–åŠŸèƒ½å¢å¼º
              collapsed:: true
              - æ·»åŠ å¯é€‰å±æ€§
              - å‘å“åº”æ·»åŠ å±æ€§
              - æ·»åŠ æ–°æ“ä½œ
          - æ­£å¸¸è¿è¡Œçš„æ¡ä»¶: å®¢æˆ·ç«¯å’ŒæœåŠ¡éƒ½éµå®ˆ[å¥å£®æ€§åŸåˆ™](https://en.wikipedia.org/wiki/Robustness_principle)
            collapsed:: true
            - æœåŠ¡åº”è¯¥ä¸ºç¼ºå°‘çš„è¯·æ±‚å±æ€§æä¾›é»˜è®¤å€¼
            - åŒæ ·ï¼Œå®¢æˆ·ç«¯åº”å¿½ç•¥ä»»ä½•é¢å¤–çš„å“åº”å±æ€§
        - è¿›è¡Œä¸»è¦å¹¶ä¸”ä¸å‘åå…¼å®¹çš„æ”¹å˜
          collapsed:: true
          - HTTP REST
            collapsed:: true
            - collapsed:: true
              
              1. åœ¨ URL ä¸­åµŒå…¥ä¸»è¦ç‰ˆæœ¬å·
              - `/v1/...`
              - `/v2/...`
            - collapsed:: true
              2. HTTP çš„å†…å®¹åå•†æœºåˆ¶, å¹¶åœ¨ MIME ç±»å‹ä¸­åŒ…å«ç‰ˆæœ¬å·
              - å®¢æˆ·ç«¯å°†ä½¿ç”¨å¦‚ä¸‹æ ¼å¼é’ˆå¯¹ 1.x ç‰ˆçš„æœåŠ¡ API å‘èµ· Order ç›¸å…³çš„è¯·æ±‚
                collapsed:: true
                - ```
                  GET /orders/xyz HTTP/1.1
                  Accept:application/vnd.example.resource+json; version=1 
                  ```
              - å®ç° API çš„æœåŠ¡é€‚é…å™¨å°†åŒ…å«åœ¨æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œè½¬æ¢çš„é€»è¾‘(API Gateway)
      - 3.1.4 æ¶ˆæ¯çš„æ ¼å¼
        collapsed:: true
        - åŸºäºæ–‡æœ¬çš„æ¶ˆæ¯æ ¼å¼
        - äºŒè¿›åˆ¶æ¶ˆæ¯æ ¼å¼
          collapsed:: true
          - æä¾›ä¸€ä¸ªå¼ºç±»å‹å®šä¹‰çš„ IDL (æ¥å£æè¿°æ–‡ä»¶), ç”¨äºå®šä¹‰æ¶ˆæ¯çš„æ ¼å¼
            collapsed:: true
            - [Protocol Buffers](https://developers.google.com/Protocol-buffers/docs/overview)
            - [Avro](https://avro.apache.org)
            - åŒºåˆ«
              collapsed:: true
              - Protocol Buffers ä½¿ç”¨ tagged fields (å¸¦æ ‡è®°çš„å­—æ®µ)ï¼Œè€Œ Avro çš„æ¶ˆè´¹è€…åœ¨è§£ææ¶ˆæ¯ä¹‹å‰éœ€è¦çŸ¥é“å®ƒçš„æ ¼å¼
                collapsed:: true
                - å› æ­¤ï¼Œå®è¡Œ API çš„ç‰ˆæœ¬å‡çº§æ¼”è¿›ï¼ŒProtocol Buffer è¦ä¼˜äº Avro
                - æœ‰ç¯‡[åšå®¢æ–‡ç« ](http://martin.kleppmann.com/2012/12/05/schema-evolution-in-avro-protocol-buffers-thrift.html)å¯¹ Thriftã€ Protocol Bu fferså’Œ Avro åšäº†éå¸¸å…¨é¢çš„æ¯”è¾ƒ
            - collapsed:: true
              #+BEGIN_NOTE
              ä½ ä¸å¾—ä¸é‡‡ç”¨ API ä¼˜å…ˆçš„æ–¹æ³•æ¥è¿›è¡ŒæœåŠ¡è®¾è®¡
              #+END_NOTE
              - ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®è¿™äº›æ ¼å¼ç”Ÿæˆåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ä»£ç 
    - 3.2 åŸºäºåŒæ­¥è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPI) æ¨¡å¼çš„é€šä¿¡
      collapsed:: true
      - TODO ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671096956858_0.png)
        collapsed:: true
        - å®¢æˆ·ç«¯ä¸­çš„ä¸šåŠ¡é€»è¾‘è°ƒç”¨**ä»£ç†æ¥å£**
          collapsed:: true
          - æ¥å£ç”±è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä»£ç†é€‚é…å™¨ç±»å®ç°
        - è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä»£ç†å‘æœåŠ¡å‘å‡ºè¯·æ±‚
          collapsed:: true
          - è¯¥è¯·æ±‚ç”±è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœåŠ¡å™¨é€‚é…å™¨ç±»å¤„ç†
        - è¯¥ç±»é€šè¿‡æ¥å£è°ƒç”¨æœåŠ¡çš„ä¸šåŠ¡é€»è¾‘ã€‚
          collapsed:: true
          - ç„¶åå®ƒå°†å›å¤å‘é€å›è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä»£ç†ï¼Œè¯¥ä»£ç†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯çš„ä¸šåŠ¡é€»è¾‘
        - å®¢æˆ·ç«¯ä½¿ç”¨åŒæ­¥çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ï¼ˆå¦‚ REST ) æ¥è°ƒç”¨æœåŠ¡ [å‚é˜…](https://microservices.io/patterns/communication-style/messaging.html)
          RPI === Command Pattern ((63959dcc-1bd8-4fc7-b337-6123a2911057)) thx #chatGPT
          - Pattern: Messaging
            collapsed:: true
            - collapsed:: true
              ```java
              public class OrderService {
              
                //...
              
                  public Order createOrder(long consumerId, long restaurantId,
                                           List<MenuItemIdAndQuantity> lineItems) {
                  Restaurant restaurant = restaurantRepository.findById(restaurantId)
                    .orElseThrow(() -> new RestaurantNotFoundException(restaurantId));
              
                  List<OrderLineItem> orderLineItems = makeOrderLineItems(lineItems, restaurant);
              
                  ResultWithDomainEvents<Order, OrderDomainEvent> orderAndEvents =
                    Order.createOrder(consumerId, restaurant, orderLineItems);
              
                  Order order = orderAndEvents.result;
                  orderRepository.save(order);
              
                  orderAggregateEventPublisher.publish(order, orderAndEvents.events);
              
                  OrderDetails orderDetails = new OrderDetails(consumerId, restaurantId, orderLineItems, order.getOrderTotal());
              
                  CreateOrderSagaState data = new CreateOrderSagaState(order.getId(), orderDetails);
                  createOrderSagaManager.create(data, Order.class, order.getId());
              
                  meterRegistry.ifPresent(mr -> mr.counter("placed_orders").increment());
              
                  return order;
                }
              
              ```
          - Pattern: Remote Procedure Invocation (RPI)
            collapsed:: true
            - collapsed:: true
              ```Scala
              @Component
              class RegistrationServiceProxy @Autowired()(restTemplate: RestTemplate) extends RegistrationService {
              
                @Value("${user_registration_url}")
                var userRegistrationUrl: String = _
              
                @HystrixCommand(commandProperties=Array(new HystrixProperty(name="execution.isolation.thread.timeoutInMilliseconds", value="800")))
                override def registerUser(emailAddress: String, password: String): Either[RegistrationError, String] = {
                  try {
                    val response = restTemplate.postForEntity(userRegistrationUrl,
                      RegistrationBackendRequest(emailAddress, password),
                      classOf[RegistrationBackendResponse])
                    response.getStatusCode match {
                      case HttpStatus.OK =>
                        Right(response.getBody.id)
                    }
                  } catch {
                    case e: HttpClientErrorException if e.getStatusCode == HttpStatus.CONFLICT =>
                      Left(DuplicateRegistrationError)
                  }
                }
              }
              
              ```
      - 3.2.1 ä½¿ç”¨REST
        collapsed:: true
        - collapsed:: true
          > REST æä¾›äº†ä¸€ç³»åˆ—æ¶æ„çº¦æŸï¼Œå½“ä½œä¸ºæ•´ä½“ä½¿ç”¨æ—¶ï¼Œå®ƒå¼ºè°ƒç»„ä»¶äº¤äº’çš„å¯æ‰©å±•æ€§ã€æ¥å£çš„é€šç”¨æ€§ã€ç»„ä»¶çš„ç‹¬ç«‹éƒ¨ç½²ï¼Œä»¥åŠé‚£äº›èƒ½å‡å°‘äº¤äº’å»¶è¿Ÿçš„ä¸­é—´ä»¶ï¼Œå®ƒå¼ºåŒ–äº†å®‰å…¨æ€§ï¼Œä¹Ÿèƒ½å°è£…é—ç•™ç³»ç»Ÿã€‚
          > â€”â€” http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm
          >
          - **èµ„æº**
            collapsed:: true
            - å®ƒé€šå¸¸è¡¨ç¤ºå•ä¸ªä¸šåŠ¡å¯¹è±¡ï¼Œä¾‹å¦‚å®¢æˆ·æˆ–äº§å“ï¼Œæˆ–ä¸šåŠ¡å¯¹è±¡çš„é›†åˆã€‚ REST ä½¿ç”¨ HTTP åŠ¨è¯æ¥æ“ä½œèµ„æºï¼Œä½¿ç”¨ URL å¼•ç”¨è¿™äº›èµ„æºã€‚
            - ä¾‹å¦‚
              collapsed:: true
              - GET è¯·æ±‚è¿”å›èµ„æºçš„è¡¨ç¤ºå½¢å¼ï¼Œè¯¥èµ„æºé€šå¸¸é‡‡ç”¨XML æ–‡æ¡£æˆ–JSON å¯¹è±¡çš„å½¢å¼ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ ¼å¼ï¼ˆå¦‚äºŒè¿›åˆ¶ï¼‰
              - POST è¯·æ±‚åˆ›å»ºæ–°èµ„æºï¼Œ PUT è¯·æ±‚æ›´æ–°èµ„æºã€‚ä¾‹å¦‚ï¼Œ Order Service å…·æœ‰ç”¨åƒåˆ›å»º Order çš„ POST/ order ç«¯ç‚¹ä»¥åŠç”¨äºæ£€ç´¢ Order çš„ `GET/orders/{orderId}` ç«¯ç‚¹ã€‚
          - å¾ˆå¤šå¼€å‘è€…éƒ½è¡¨ç¤ºä»–ä»¬åŸºäº HTTP çš„ API æ˜¯ RESTful é£æ ¼çš„ã€‚ä½†æ˜¯ï¼Œå¦‚åŒ RoyFielding åœ¨ä»–çš„[åšå®¢](http://rog.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven) ä¸­æ‰€è¯´ï¼Œå¹¶éæ‰€æœ‰è¿™äº› API éƒ½æ˜¯ RESTful é£æ ¼çš„ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ REST æˆç†Ÿåº¦æ¨¡å‹
        - REST æˆç†Ÿåº¦æ¨¡å‹
          collapsed:: true
          - Leonard Richardson ä¸º REST å®šä¹‰äº†ä¸€ä¸ª[æˆç†Ÿåº¦æ¨¡å‹](https://martinfowler.com/articles/richardsonMaturityModel.html)
          - Level
            collapsed:: true
            - â–  Level 0
              collapsed:: true
              - æœåŠ¡çš„å®¢æˆ·ç«¯åªæ˜¯å‘æœåŠ¡ç«¯ç‚¹å‘èµ· HTTP POST è¯·æ±‚ï¼Œè¿›è¡ŒæœåŠ¡è°ƒç”¨
              - æ¯ä¸ªè¯·æ±‚éƒ½æŒ‡æ˜äº†éœ€è¦æ‰§è¡Œçš„æ“ä½œã€è¿™ä¸ªæ“ä½œé’ˆå¯¹çš„ç›®æ ‡ï¼ˆä¾‹å¦‚ï¼Œä¸šåŠ¡å¯¹è±¡ï¼‰å’Œå¿…è¦çš„å‚æ•°
            - â–  Level 1
              collapsed:: true
              - å¼•å…¥äº†**èµ„æº**çš„æ¦‚å¿µ
              - è¦æ‰§è¡Œå¯¹èµ„æºçš„æ“ä½œï¼Œå®¢æˆ·ç«¯éœ€è¦å‘å‡ºæŒ‡å®šè¦æ‰§è¡Œçš„æ“ä½œå’ŒåŒ…å«ä»»ä½•å‚æ•°çš„ POST è¯·æ±‚
            - â–  Level 2
              collapsed:: true
              - ä½¿ç”¨ HTTP åŠ¨è¯æ¥æ‰§è¡Œæ“ä½œ
                collapsed:: true
                - è­¬å¦‚ GETè¡¨ç¤ºè·å–ã€POST è¡¨ç¤ºåˆ›å»ºã€ PUT è¡¨ç¤ºæ›´æ–°
              - è¯·æ±‚æŸ¥è¯¢å‚æ•°å’Œä¸»ä½“ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æŒ‡å®šæ“ä½œçš„å‚æ•°ã€‚
                collapsed:: true
                - è¿™è®©æœåŠ¡èƒ½å¤Ÿå€ŸåŠ© Web åŸºç¡€è®¾æ–½æœåŠ¡
                  collapsed:: true
                  - ä¾‹å¦‚é€šè¿‡CDN æ¥ç¼“å­˜ GET è¯·æ±‚
            - â–  Level 3
              collapsed:: true
              - åŸºäº **HATEOAS( Hypertext As The Engine Of Application State)** åŸåˆ™è®¾è®¡
                wikipedia:: [HATEOAS - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦](https://zh.wikipedia.org/wiki/HATEOAS)
                collapsed:: true
                - åŸºæœ¬æ€æƒ³æ˜¯åœ¨ç”± GET è¯·æ±‚è¿”å›çš„èµ„æºä¿¡æ¯ä¸­åŒ…å«é“¾æ¥ï¼Œè¿™äº›é“¾æ¥èƒ½å¤Ÿæ‰§è¡Œè¯¥èµ„æºå…è®¸çš„æ“ä½œ
                  - ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯é€šè¿‡è®¢å•èµ„æºä¸­åŒ…å«çš„é“¾æ¥å–æ¶ˆæŸä¸€è®¢å•ï¼Œæˆ–è€…å‘é€ GET è¯·æ±‚å»è·å–è¯¥è®¢å•ï¼Œç­‰ç­‰
                - server provides links to resources in its responses, allowing the client to discover and navigate the API without prior knowledge of the API's structure.
                  collapsed:: true
                  #chatGPT
                  - ```java
                    // The Book class represents a resource in the API
                    public class Book {
                      private String title;
                      private String author;
                    
                      // Getters and setters for the title and author properties
                    
                      // This method adds a link to the book resource
                      public void addLink(String rel, String href) {
                        // Code to add a link to the book resource
                      }
                    }
                    
                    // The BookResource class provides an API for interacting with book resources
                    public class BookResource {
                      // This method returns a list of books
                      public List<Book> getBooks() {
                        List<Book> books = new ArrayList<>();
                        // Code to retrieve the books from a database
                    
                        // Add a link to each book resource
                        for (Book book : books) {
                          book.addLink("self", "/books/" + book.getId());
                        }
                    
                        return books;
                      }
                    }
                    ```
                    - In this example, the  `BookResource`  class provides a  `getBooks`  method that returns a list of  `Book`  objects. Each  `Book`  object includes a link to its own resource, allowing the client to easily access the book's details by following the link. This allows the client to interact with the API without knowing the URLs of the individual book resources in advance.
                - HATEOAS çš„ä¼˜ç‚¹
                  mark:: [Advantages Of (Also) Using HATEOAS In RESTFul APIs](https://www.infoq.com/news/2009/04/hateoas-restful-api-advantages/)
                  collapsed:: true
                  - æ— é¡»åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å†™å…¥ç¡¬é“¾æ¥çš„ URL
                  - ç”±äºèµ„æºä¿¡æ¯ä¸­åŒ…å«å¯å…è®¸æ“ä½œçš„é“¾æ¥ï¼Œå®¢æˆ·ç«¯æ— é¡»çŒœæµ‹åœ¨èµ„æºçš„å½“å‰çŠ¶æ€ä¸‹æ‰§è¡Œä½•ç§æ“ä½œ
        - å®šä¹‰ REST API
          collapsed:: true
          - ä½¿ç”¨æ¥å£å®šä¹‰è¯­è¨€ ( IDL ) å®šä¹‰ API
            - æœ€æµè¡Œçš„ REST IDL æ˜¯ [Open API è§„èŒƒ](http://www.openapis.org)
              - å®ƒæ˜¯ä» Swagger å¼€æºé¡¹ç›®å‘å±•è€Œæ¥çš„
                - Swagger é¡¹ç›®æ˜¯ä¸€ç»„ç”¨äºå¼€å‘å’Œè®°å½• REST API çš„å·¥å…·
                  - å®ƒåŒ…æ‹¬ä»æ¥å£å®šä¹‰åˆ°ç”Ÿæˆå®¢æˆ·ç«¯æ¡© ( stub , å­˜æ ¹ï¼‰å’ŒæœåŠ¡å™¨éª¨æ¶çš„ä¸€æ•´å¥—å·¥å…·
        - åœ¨â€”ä¸ªè¯·æ±‚ä¸­è·å–å¤šä¸ªèµ„æºçš„æŒ‘æˆ˜
          - API å…è®¸å®¢æˆ·ç«¯åœ¨è·å–èµ„æºæ—¶æ£€ç´¢ç›¸å…³èµ„æºã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·å¯ä»¥ä½¿ç”¨ `GET/orders/order-id-1345?expand=consurner` æ£€ç´¢ Order åŠå…¶ Consumer
            collapsed:: true
            - è¯·æ±‚ä¸­çš„æŸ¥è¯¢å‚æ•°ç”¨æ¥æŒ‡å®šè¦ä¸ Order ä¸€èµ·è¿”å›çš„ç›¸å…³èµ„æº
            - è®¸å¤šåœºæ™¯ä¸­éƒ½å¾ˆæœ‰æ•ˆ, ä½†æ˜¯
              - å®ç°å®ƒä¹Ÿå¯èƒ½å¾ˆè€—æ—¶
              - å¯¹äºæ›´å¤æ‚çš„åœºæ™¯æ¥è¯´ï¼Œå®ƒé€šå¸¸æ˜¯ä¸å¤Ÿçš„
          - æ›¿ä»£æŠ€æœ¯, æ—¨åœ¨æ”¯æŒé«˜æ•ˆçš„æ•°æ®è·å–
            collapsed:: true
            - [GraphQL](http://graphql.org) å’Œ [Neflix Falcor](http://netflix.github.io/falcor)
        - æŠŠæ“ä½œæ˜ å°„ä¸º HTTP åŠ¨è¯çš„æŒ‘æˆ˜
          - æ¯ä¸€ç§ä¸šåŠ¡éƒ½æœ‰å¤šç§æ–¹æ³•ä½œä¸ºå®ç°
          - æ›´æ–°å¯èƒ½ä¸æ˜¯å¹•ç­‰çš„
            - è¿™å´æ˜¯ä½¿ç”¨ PUT çš„è¦æ±‚
          - Solution 1
            - å®šä¹‰ç”¨äºæ›´æ–°èµ„æºçš„ç‰¹å®šæ–¹é¢çš„å­èµ„æº
              - OrderService å…·æœ‰ç”¨äºå–æ¶ˆè®¢å•çš„ `POST/orders/{orderId}/cancel` ç«¯ç‚¹ï¼Œä»¥åŠç”¨äºä¿®è®¢è®¢å•çš„ `POST/orders/{orderId}/revise` ç«¯ç‚¹
          - Solution 2
            - å°†åŠ¨è¯æŒ‡å®šä¸º URL çš„æŸ¥è¯¢å‚æ•°
          - å¯æƒœçš„æ˜¯ï¼Œè¿™ä¸¤ç§è§£å†³æ–¹æ¡ˆéƒ½ä¸æ˜¯ç‰¹åˆ«ç¬¦åˆ RESTful çš„è¦æ±‚ã€‚
          - æ˜ å°„æ“ä½œåˆ° HTTP åŠ¨è¯çš„è¿™ä¸ªé—®é¢˜å¯¼è‡´äº† REST æ›¿ä»£æ–¹æ¡ˆçš„æ—¥ç›Šæ™®åŠ, è§ ((639b0d75-e399-48dd-a4e6-0e2dc1f10b29))
        - REST çš„å¥½å¤„å’Œå¼Šç«¯
          - å¥½å¤„
            collapsed:: true
            - 1.ç®€å• / ç†Ÿæ‚‰
            - 2.API å¥½æµ‹è¯•
              collapsed:: true
              - Postman (æµè§ˆå™¨æ’ä»¶)
              - curl ä¹‹ç±»çš„å‘½ä»¤è¡Œ
            - 3.ç›´æ¥æ”¯æŒè¯·æ±‚ / å“åº”æ–¹å¼çš„é€šä¿¡
            - 4.HTTP å¯¹é˜²ç«å¢™å‹å¥½
            - 5.ä¸éœ€è¦ä¸­é—´ä»£ç†ï¼Œç®€åŒ–ç³»ç»Ÿæ¶æ„
          - å¼Šç«¯
            collapsed:: true
            - 1.é€šä¿¡åªæ”¯æŒ **è¯·æ±‚/å“åº”æ–¹å¼**
            - 2.å¯èƒ½å¯¼è‡´å¯ç”¨æ€§é™ä½
              collapsed:: true
              - ç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç›´æ¥é€šä¿¡è€Œæ²¡æœ‰ä»£ç†æ¥ç¼“å†²æ¶ˆæ¯
                - å®ƒä»¬å¿…é¡»åœ¨ REST API è°ƒç”¨æœŸé—´éƒ½ä¿æŒåœ¨çº¿
            - 3.å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æœåŠ¡å®ä¾‹çš„ä½ç½® (URL)
              collapsed:: true
              - å¦‚ 3.2.4 èŠ‚æ‰€è¿°ï¼Œå®¢æˆ·ç«¯å¿…é¡»ä½¿ç”¨æ‰€è°“çš„æœåŠ¡å‘ç°æœºåˆ¶æ¥å®šä½æœåŠ¡å®ä¾‹ï¼Œè¿™æ˜¯ç°ä»£åº”ç”¨ç¨‹åºä¸­çš„ä¸€ä¸ªé‡è¦é—®é¢˜ã€‚
            - 4.å•ä¸ªè¯·æ±‚ä¸­è·å–å¤šä¸ªèµ„æºå…·æœ‰æŒ‘æˆ˜æ€§
            - 5.æœ‰æ—¶å¾ˆéš¾å°†å¤šä¸ªæ›´æ–°æ“ä½œæ˜ å°„åˆ° HTTP åŠ¨è¯
      - 3.2.2 ä½¿ç”¨[gRPC(Remote Procedure Call)](http://www.grpc.io)
        id:: 639b0d75-e399-48dd-a4e6-0e2dc1f10b29
        define:: ç”¨äºç¼–å†™è·¨è¯­è¨€å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„[æ¡†æ¶](https://en.wikipedia.org/wiki/Remote_procedure_call)
        collapsed:: true
        - å¼•ç”¨åŸå› 
          collapsed:: true
          - REST **ç—›ç‚¹**: è®¾è®¡**æ”¯æŒå¤šä¸ªæ›´æ–°æ“ä½œ**çš„ REST API
        - RPCæ˜¯ä¸€ç§åŸºäºäºŒè¿›åˆ¶æ¶ˆæ¯çš„åè®®, ä¸å¾—ä¸é‡‡ç”¨ **API ä¼˜å…ˆ**çš„æ–¹æ³•æ¥è¿›è¡ŒæœåŠ¡è®¾è®¡
          collapsed:: true
          #google
          - > API-first design is a software design approach in which an application programming interface (API) is designed and developed first, before the actual implementation of the application. This approach is often used in the development of web-based applications, particularly those that will be consumed by other developers or businesses through an API.
            > An example of API-first design might be the development of a customer relationship management (CRM) system that is intended to be used by other businesses through an API. The developers of the CRM system would first design and document the API, outlining the various endpoints, input parameters, and output formats that would be available to consumers of the API. They would then implement the actual CRM system, ensuring that it is designed in a way that aligns with the API they have already designed. This approach allows the developers to focus on the functionality of the CRM system, while also ensuring that it can be easily consumed and integrated with other systems through the API.
            > #chatGPT
            >
        - gRPC API
          collapsed:: true
          - å¯ä»¥ä½¿ç”¨åŸºäº Protocol Buffer çš„ IDL å®šä¹‰ gRPC API
            collapsed:: true
            - ä½¿ç”¨ Protocol Buffer ç¼–è¯‘å™¨ç”Ÿæˆå®¢æˆ·ç«¯çš„æ¡© (stub/å­˜æ ¹) å’ŒæœåŠ¡ç«¯éª¨æ¶ (skeleton)
              - ç¼–è¯‘å™¨å¯ä»¥ä¸ºå„ç§è¯­è¨€ç”Ÿæˆä»£ç ï¼ŒåŒ…æ‹¬Javaã€ C# ã€ Node.jså’Œ GoLang
              - å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨ HTTP/2 ä»¥ Protocol Buffer æ ¼å¼äº¤æ¢äºŒè¿›åˆ¶æ¶ˆæ¯
          - gRPC API ç”± ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡ å’Œ è¯·æ±‚/å“åº”æ¶ˆæ¯ å®šä¹‰ç»„æˆ
            collapsed:: true
            - æœåŠ¡å®šä¹‰ç±»ä¼¼äºJavaæ¥å£ï¼Œæ˜¯**å¼ºç±»å‹æ–¹æ³•çš„é›†åˆ**
              - é™¤äº†æ”¯æŒç®€å•çš„è¯·æ±‚/å“åº”RPCä¹‹å¤–ï¼Œ gRPCè¿˜æ”¯æŒæµå¼ RPC
              - æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨æ¶ˆæ¯æµå›å¤å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯æµ
          - gRPC ä½¿ç”¨ Protocol Buffers ä½œä¸ºæ¶ˆæ¯æ ¼å¼
            collapsed:: true
            - Protocol Buffersæ˜¯ä¸€ç§é«˜æ•ˆä¸”ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼
              - å®ƒæ˜¯ä¸€ç§æ ‡è®°æ ¼å¼
              - Protocol Buffers æ¶ˆæ¯çš„æ¯ä¸ªå­—æ®µéƒ½æœ‰ç¼–å·ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªç±»å‹ä»£ç 
                - æ¶ˆæ¯æ¥æ”¶æ–¹å¯ä»¥æå–æ‰€éœ€çš„å­—æ®µï¼Œå¹¶è·³è¿‡å®ƒæ— æ³•è¯†åˆ«çš„å­—æ®µ
                - å› æ­¤ï¼ŒgRPC **ä½¿ API èƒ½å¤Ÿåœ¨ä¿æŒå‘åå…¼å®¹çš„åŒæ—¶è¿›è¡Œå˜æ›´**
        - å¥½å¤„
          collapsed:: true
          - è®¾è®¡**å¤æ‚æ›´æ–°**æ“ä½œçš„ API éå¸¸**ç®€å•**
          - **é«˜æ•ˆã€ç´§å‡‘çš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶**ï¼Œå°¤å…¶æ˜¯åœ¨äº¤æ¢å¤§é‡æ¶ˆæ¯æ—¶
          - æ”¯æŒåœ¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å’Œæ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä½¿ç”¨**åŒå‘æµå¼æ¶ˆæ¯**æ–¹å¼
          - å®ƒå®ç°äº†å®¢æˆ·ç«¯å’Œç”¨å„ç§è¯­è¨€ç¼–å†™çš„**æœåŠ¡ç«¯ä¹‹é—´çš„äº’æ“ä½œæ€§**
        - å¼Šç«¯
          collapsed:: true
          - ä¸åŸºäº REST/JSON çš„ APIæœºåˆ¶ç›¸æ¯”ï¼ŒJavaScript å®¢æˆ·ç«¯ä½¿ç”¨åŸºäº gRPCçš„ API éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚
          - æ—§å¼é˜²ç«å¢™å¯èƒ½ä¸æ”¯æŒ HTTP/2
        - ```java
          // Define the service in a .proto file
          syntax = "proto3";
          
          service Greeter {
            rpc SayHello (HelloRequest) returns (HelloResponse);
          }
          
          message HelloRequest {
            string name = 1;
          }
          
          message HelloResponse {
            string message = 1;
          }
          
          // Generate the stubs using the Protocol Buffers compiler
          $ protoc -I . greeter.proto --java_out=. --grpc_out=. --plugin=protoc-gen-grpc=`which grpc_cpp_plugin`
          
          // Implement the service
          import com.example.grpc.GreeterGrpc;
          import com.example.grpc.HelloRequest;
          import com.example.grpc.HelloResponse;
          import io.grpc.ManagedChannel;
          import io.grpc.ManagedChannelBuilder;
          import io.grpc.StatusRuntimeException;
          
          public class HelloWorldClient {
            public static void main(String[] args) {
              ManagedChannel channel = ManagedChannelBuilder.forAddress("localhost", 50051)
                  .usePlaintext()
                  .build();
          
              GreeterGrpc.GreeterBlockingStub stub = GreeterGrpc.newBlockingStub(channel);
              HelloRequest request = HelloRequest.newBuilder().setName("World").build();
              try {
                HelloResponse response = stub.sayHello(request);
                System.out.println(response.getMessage());
              } catch (StatusRuntimeException e) {
                System.out.println("RPC failed: " + e.getStatus());
              }
            }
          }
          ```
          This example shows a simple gRPC client that sends a request to a server to say hello. The server's response is then printed to the console. This example demonstrates how to define a gRPC service, generate the necessary stubs and interfaces using the Protocol Buffers compiler, and implement a client that can communicate with the server using the gRPC API.
          #chatGPT
          --------
      - 3.2.3 ä½¿ç”¨æ–­è·¯å™¨æ¨¡å¼å¤„ç†å±€éƒ¨æ•…éšœ
        collapsed:: true
        - æ–­è·¯å™¨æ¨¡å¼
          define:: "è¿™æ˜¯ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä»£ç†ï¼Œåœ¨è¿ç»­å¤±è´¥æ¬¡æ•°è¶…è¿‡æŒ‡å®šé˜å€¼åçš„ä¸€æ®µæ—¶é—´å†…ï¼Œè¿™ä¸ªä»£ç†ä¼šç«‹å³æ‹’ç»å…¶ä»–è°ƒç”¨"
          via:: https://microservices.io/patterns/reliability/circuit-breaker.html
        - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671261044236_0.png)
          mark:: å¦‚æœOrder Service å‡ºé—®é¢˜: OrderServiceProxy å°†æ— é™æœŸåœ°é˜»å¡. ç­‰å¾…å“åº”. æœ€åæ•´ä¸ª API ç½‘å…³å°±ä¼šå´©æ‰.
          - è®©è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä»£ç† (å¦‚ OrderServiceProxy) æœ‰æ­£ç¡®å¤„ç†æ— å“åº”æœåŠ¡çš„èƒ½åŠ›
          - éœ€è¦å†³å®šå¦‚ä½•ä»å¤±è´¥çš„è¿œç¨‹æœåŠ¡ä¸­æ¢å¤
        - å¼€å‘å¯é çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä»£ç†
          collapsed:: true
          - Netflix æè¿°çš„ [Fault Tolerance in a High Volume, Distributed System | by Netflix Technology Blog | Netflix TechBlog](https://netflixtechblog.com/fault-tolerance-in-a-high-volume-distributed-system-91ab4faae74a) æ¥ä¿æŠ¤è‡ªå·±, åŒ…æ‹¬
            - ç½‘ç»œè¶…æ—¶
              collapsed:: true
              - ç­‰å¾…é’ˆå¯¹è¯·æ±‚çš„å“åº”æ—¶ï¼Œä¸€å®šä¸è¦åšæˆæ— é™é˜»å¡ï¼Œè€Œæ˜¯è¦è®¾å®šä¸€ä¸ªè¶…æ—¶
                - ä½¿ç”¨è¶…æ—¶å¯ä»¥ä¿è¯ä¸ä¼šä¸€ç›´åœ¨æ— å“åº”çš„è¯·æ±‚ä¸Šæµªè´¹èµ„æº
            - é™åˆ¶å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚çš„æ•°å€
              collapsed:: true
              - æŠŠå®¢æˆ·ç«¯èƒ½å¤Ÿå‘ç‰¹å®šæœåŠ¡å‘èµ·çš„è¯·æ±‚è®¾ç½®ä¸€ä¸ªä¸Šé™
                collapsed:: true
                - å¦‚æœè¯·æ±‚è¾¾åˆ°äº†è¿™æ ·çš„ä¸Šé™ï¼Œå¾ˆæœ‰å¯èƒ½å‘èµ·æ›´å¤šçš„è¯·æ±‚ä¹Ÿæ— æµäºäº‹
                  - è¿™æ—¶å°±åº”è¯¥è®©è¯·æ±‚ç«‹åˆ»å¤±è´¥
            - æ–­è·¯å™¨æ¨¡å¼
              collapsed:: true
              - ç›‘æ§å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚çš„æˆåŠŸå’Œå¤±è´¥æ•°é‡ï¼Œå¦‚æœå¤±è´¥çš„æ¯”ä¾‹è¶…è¿‡ä¸€å®šçš„é˜”å€¼ï¼Œå°±å¯åŠ¨æ–­è·¯å™¨ï¼Œè®©åç»­çš„è°ƒç”¨ç«‹åˆ»å¤±æ•ˆ
                - å¦‚æœå¤§é‡çš„è¯·æ±‚éƒ½ä»¥å¤±è´¥è€Œå‘Šç»ˆï¼Œè¿™è¯´æ˜è¢«è°ƒæœåŠ¡ä¸å¯ç”¨ï¼Œè¿™æ ·å³ä½¿å‘èµ·æ›´å¤šçš„è°ƒç”¨ä¹Ÿæ˜¯æ— æµäºäº‹
                - åœ¨ç»è¿‡ä¸€å®šçš„æ—¶é—´åï¼Œå®¢æˆ·ç«¯åº”è¯¥ç»§ç»­å°è¯•ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸï¼Œåˆ™è§£é™¤æ–­è·¯å™¨
          - [Netflix Hystrix](https://github.com/Netflix/Hystrix) in `Java`; [Pollyåº“](https://github.com/Appv-Next/Polly) in `.NET`
        - ä»æœåŠ¡å¤±æ•ˆæ•…éšœä¸­æ¢å¤
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671261954020_0.png)
      - 3.2.4 ä½¿ç”¨æœåŠ¡å‘ç°
        collapsed:: true
        - å¿…è¦æ€§ -> æœåŠ¡å®ä¾‹é›†ä¼šåŠ¨æ€æ›´æ”¹(æ•…éšœå’Œå‡çº§)
        - ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°
          collapsed:: true
          - æœåŠ¡å‘ç°çš„å…³é”®ç»„ä»¶æ˜¯**æœåŠ¡æ³¨å†Œè¡¨**
            - æœåŠ¡æ³¨å†Œè¡¨æ˜¯åŒ…å«æœåŠ¡å®ä¾‹ç½‘ç»œä½ç½®ä¿¡æ¯çš„ä¸€ä¸ªæ•°æ®åº“
          - æœåŠ¡å®ä¾‹å¯åŠ¨å’Œåœæ­¢æ—¶ï¼ŒæœåŠ¡å‘ç°æœºåˆ¶ä¼šæ›´æ–°æœåŠ¡æ³¨å†Œè¡¨
            - å½“å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡æ—¶ï¼ŒæœåŠ¡å‘ç°æœºåˆ¶ä¼šæŸ¥è¯¢æœåŠ¡æ³¨å†Œè¡¨ä»¥è·å–å¯ç”¨æœåŠ¡å®ä¾‹çš„åˆ—è¡¨ï¼Œå¹¶å°†è¯·æ±‚è·¯ç”±åˆ°å…¶ä¸­ä¸€ä¸ªæœåŠ¡å®ä¾‹
          - æœ‰ 2 ç§ä¸»è¦å®ç°æ–¹å¼
            - æœåŠ¡åŠå…¶å®¢æˆ·ç›´æ¥ä¸æœåŠ¡æ³¨å†Œè¡¨äº¤äº’ã€‚
            - é€šè¿‡éƒ¨ç½²åŸºç¡€è®¾æ–½æ¥å¤„ç†æœåŠ¡å‘ç° ï¼ˆ12 ç« ä¸­è¯¦ç»†è®¨è®ºï¼‰
        - åº”ç”¨å±‚æœåŠ¡å‘ç°æ¨¡å¼
          collapsed:: true
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671262994174_0.png)
          - ä¸¤ç§æ¨¡å¼çš„ç»„åˆ
            - è‡ªæ³¨å†Œæ¨¡å¼ï¼šæœåŠ¡å®ä¾‹å‘æœåŠ¡æ³¨å†Œè¡¨æ³¨å†Œè‡ªå·±
              via:: [Self Registration pattern](https://microservices.io/patterns/self-registration.html)
            - å®¢æˆ·ç«¯å‘ç°æ¨¡å¼ï¼šå®¢æˆ·ç«¯ä»æœåŠ¡æ³¨å†Œè¡¨æ£€ç´¢å¯ç”¨æœåŠ¡å®ä¾‹çš„åˆ—è¡¨ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œè´Ÿè½½å¹³è¡¡
              via:: [Client-side service discovery pattern](https://microservices.io/patterns/client-side-discovery.html)
          - å¥½å¤„
            - å¯ä»¥å¤„ç†å¤šå¹³å°éƒ¨ç½²çš„é—®é¢˜ ï¼ˆæœåŠ¡å‘ç°æœºåˆ¶ä¸å…·ä½“çš„éƒ¨ç½²å¹³å°æ— å…³ï¼‰
          - å¼Šç«¯
            - éœ€è¦ä¸ºä½ ä½¿ç”¨çš„æ¯ç§ç¼–ç¨‹è¯­è¨€ï¼ˆå¯èƒ½è¿˜æœ‰æ¡†æ¶ï¼‰ æä¾›æœåŠ¡å‘ç°åº“
            - å¼€å‘è€…è´Ÿè´£è®¾ç½®å’Œç®¡ç†æœåŠ¡æ³¨å†Œè¡¨ï¼Œ è¿™ ä¼šåˆ†æ•£ä¸€å®šçš„ç²¾åŠ›
        - å¹³å°å±‚æœåŠ¡å‘ç°æ¨¡å¼
          collapsed:: true
          - ![image.png](../assets/book/Microservices-Patterns-With-Examples-in-Java/image_1671262893616_0.png)
          - ä¸¤ç§æ¨¡å¼çš„ç»„åˆ
            collapsed:: true
            - ç¬¬ä¸‰æ–¹æ³¨å†Œæ¨¡å¼: æœåŠ¡å®ä¾‹ç”±ç¬¬ä¸‰æ–¹è‡ªåŠ¨æ³¨å†Œåˆ°æœåŠ¡æ³¨å†Œè¡¨
              via:: [3rd Party Registration Pattern](https://microservices.io/patterns/3rd-party-registration.html)
            - æœåŠ¡ç«¯å‘ç°æ¨¡å¼ï¼šå®¢æˆ·ç«¯å‘è·¯ç”±å™¨å‘å‡ºè¯·æ±‚ï¼Œè·¯ç”±å™¨è´Ÿè´£æœåŠ¡å‘ç°
              via:: [Server-side service discovery pattern](https://microservices.io/patterns/server-side-discovery.html)
          - å¥½å¤„
            - æœåŠ¡å‘ç°çš„æ‰€æœ‰æ–¹é¢éƒ½å®Œå…¨ç”±éƒ¨ç½²å¹³å°å¤„ç†
          - å¼Šç«¯
            - ä»…é™äºæ”¯æŒä½¿ç”¨è¯¥å¹³å°éƒ¨ç½²çš„æœåŠ¡
    - 3.3 åŸºäºå¼‚æ­¥æ¶ˆæ¯æ¨¡å¼çš„é€šä¿¡
      - 3.3.1 ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¼ é€’
        - å…³äºæ¶ˆæ¯
        - å…³äºæ¶ˆæ¯é€šé“
      - 3.3.2 ä½¿ç”¨æ¶ˆæ¯æœºåˆ¶å®ç°äº¤äº’æ–¹å¼
        - å®ç°è¯·æ±‚ I å“åº”å’Œå¼‚æ­¥è¯·æ±‚/å“åº”
        - å®ç°å•å‘é€šçŸ¥
        - å®ç°å‘å¸ƒ/è®¢é˜…
        - å®ç°å‘å¸ƒ/å¼‚æ­¥å“åº”
      - 3.3.3 ä¸ºåŸºäºæ¶ˆæ¯æœºåˆ¶çš„æœåŠ¡APIåˆ›å»ºAPIè§„èŒƒ
        - è®°å½•å¼‚æ­¥æ“ä½œ
        - è®°å½•äº‹ä»¶å‘å¸ƒ
          id:: 639d7be0-98ed-4f08-bb30-04660f771bb4
      - 3.3.4 ä½¿ç”¨æ¶ˆæ¯ä»£ç†
        - æ— ä»£ç†æ¶ˆæ¯
        - åŸºäºä»£ç†çš„æ¶ˆæ¯
          - å¥½å¤„
          - å¼Šç«¯
      - 3.3.5 å¤„ç†å¹¶å‘å’Œæ¶ˆæ¯é¡ºåº
      - 3.3.6 å¤„ç†é‡å¤æ¶ˆæ¯
        - ç¼–å†™å¹•ç­‰æ¶ˆæ¯å¤„ç†å™¨
        - è¸‰è¸ªæ¶ˆæ¯å¹¶ä¸¢å¼ƒé‡å¤æ¶ˆæ¯
          id:: 639d7c40-484d-4c81-8c1a-1aa68d7f17ea
      - 3.3.7 äº‹åŠ¡æ€§æ¶ˆæ¯
        - ä½¿ç”¨æ•°æ®åº“è¡¨ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—
        - é€šè¿‡è½®è¯¢æ¨¡å¼å‘å¸ƒäº‹ä»¶
        - ä½¿ç”¨äº‹åŠ¡æ—¥å¿—æ‹–å°¾æ¨¡å¼å‘å¸ƒäº‹ä»¶
      - 3.3.8 æ¶ˆæ¯ç›¸å…³çš„ç±»åº“å’Œæ¡†æ¶
    - 3.4 ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯æé«˜å¯ç”¨æ€§
      - 3.4.1 åŒæ­¥æ¶ˆæ¯ä¼šé™ä½å¯ç”¨æ€§
      - 3.4.2 æ¶ˆé™¤åŒæ­¥äº¤äº’
        - ä½¿ç”¨å¼‚æ­¥äº¤äº’æ¨¡å¼
          id:: 639d7cbc-4a72-4c32-a5fc-10415331456e
        - å¤åˆ¶æ•°æ®
        - å…ˆè¿”å›å“åº”ï¼Œå†å®Œæˆå¤„ç†
  - ç¬¬4ç«  ä½¿ç”¨Sagaç®¡ç†äº‹åŠ¡
    - 4.1 å¾®æœåŠ¡æ¶æ„ä¸‹çš„äº‹åŠ¡ç®¡ç†
      - 4.1.1 å¾®æœåŠ¡æ¶æ„å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„éœ€æ±‚
      - 4.1.2 åˆ†å¸ƒå¼äº‹åŠ¡çš„æŒ‘æˆ˜
      - 4.1.3 ä½¿ç”¨Sagaæ¨¡å¼ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§
    - 4.2 Sagaçš„åè°ƒæ¨¡å¼
      - 4.2.1 ååŒå¼Saga
      - 4.2.2 ç¼–æ’å¼Saga
    - 4.3 è§£å†³éš”ç¦»é—®é¢˜
      - 4.3.1 ç¼ºä¹éš”ç¦»å¯¼è‡´çš„é—®é¢˜
      - 4.3.2 Sagaæ¨¡å¼ä¸‹å®ç°éš”ç¦»çš„å¯¹ç­–
    - 4.4 Order Serviceå’ŒCreate Order Sagaçš„è®¾è®¡
      - 4.4.1 OrderServiceç±»
      - 4.4.2 Create Order Sagaçš„å®ç°
      - 4.4.3 OrderCommandHandlersç±»
      - 4.4.4 OrderServiceConfigurationç±»
  - ç¬¬5ç«  å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸šåŠ¡é€»è¾‘è®¾è®¡
    - 5.1 ä¸šåŠ¡é€»è¾‘ç»„ç»‡æ¨¡å¼
      - 5.1.1 ä½¿ç”¨äº‹åŠ¡è„šæœ¬æ¨¡å¼è®¾è®¡ä¸šåŠ¡é€»è¾‘
      - 5.1.2 ä½¿ç”¨é¢†åŸŸæ¨¡å‹æ¨¡å¼è®¾è®¡ä¸šåŠ¡é€»è¾‘
      - 5.1.3 å…³äºé¢†åŸŸé©±åŠ¨è®¾è®¡
    - 5.2 ä½¿ç”¨èšåˆæ¨¡å¼è®¾è®¡é¢†åŸŸæ¨¡å‹
      - 5.2.1 æ¨¡ç³Šè¾¹ç•Œæ‰€å¸¦æ¥çš„é—®é¢˜
      - 5.2.2 èšåˆæ‹¥æœ‰æ˜ç¡®çš„è¾¹ç•Œ
      - 5.2.3 èšåˆçš„è§„åˆ™
      - 5.2.4 èšåˆçš„é¢—ç²’åº¦
      - 5.2.5 ä½¿ç”¨èšåˆè®¾è®¡ä¸šåŠ¡é€»è¾‘
    - 5.3 å‘å¸ƒé¢†åŸŸäº‹ä»¶
      - 5.3.1 ä¸ºä»€ä¹ˆéœ€è¦å‘å¸ƒå˜æ›´äº‹ä»¶
      - 5.3.2 ä»€ä¹ˆæ˜¯é¢†åŸŸäº‹ä»¶
      - 5.3.3 äº‹ä»¶å¢å¼º
      - 5.3.4 è¯†åˆ«é¢†åŸŸäº‹ä»¶
      - 5.3.5 ç”Ÿæˆå’Œå‘å¸ƒé¢†åŸŸäº‹ä»¶
      - 5.3.6 æ¶ˆè´¹é¢†åŸŸäº‹ä»¶
    - 5.4 Kitchen Serviceçš„ä¸šåŠ¡é€»è¾‘
    - 5.5 Order Serviceçš„ä¸šåŠ¡é€»è¾‘
      - 5.5.1 Orderèšåˆ
      - 5.5.2  OrderServiceç±»
  - ç¬¬6ç«  ä½¿ç”¨äº‹ä»¶æº¯æºå¼€å‘ä¸šåŠ¡é€»è¾‘
    - 6.1 ä½¿ç”¨äº‹ä»¶æº¯æºå¼€å‘ä¸šåŠ¡é€»è¾‘æ¦‚è¿°
      - 6.1.1 ä¼ ç»ŸæŒä¹…åŒ–æŠ€æœ¯çš„é—®é¢˜
      - 6.1.2 ä»€ä¹ˆæ˜¯äº‹ä»¶æº¯æº
      - 6.1.3 ä½¿ç”¨ä¹è§‚é”å¤„ç†å¹¶å‘æ›´æ–°
      - 6.1.4 äº‹ä»¶æº¯æºå’Œå‘å¸ƒäº‹ä»¶
      - 6.1.5 ä½¿ç”¨å¿«ç…§æå‡æ€§èƒ½
      - 6.1.6 å¹‚ç­‰æ–¹å¼çš„æ¶ˆæ¯å¤„ç†
      - 6.1.7 é¢†åŸŸäº‹ä»¶çš„æ¼”åŒ–
      - 6.1.8 äº‹ä»¶æº¯æºçš„å¥½å¤„
      - 6.1.9 äº‹ä»¶æº¯æºçš„å¼Šç«¯
    - 6.2 å®ç°äº‹ä»¶å­˜å‚¨åº“
      - 6.2.1 Eventuate Localäº‹ä»¶å­˜å‚¨åº“çš„å·¥ä½œåŸç†
      - 6.2.2 Eventuateçš„Javaå®¢æˆ·ç«¯æ¡†æ¶
    - 6.3 åŒæ—¶ä½¿ç”¨Sagaå’Œäº‹ä»¶æº¯æº
      - 6.3.1 ä½¿ç”¨äº‹ä»¶æº¯æºå®ç°ååŒå¼Saga
      - 6.3.2 åˆ›å»ºç¼–æ’å¼Saga
      - 6.3.3 å®ç°åŸºäºäº‹ä»¶æº¯æºçš„Sagaå‚ä¸æ–¹
      - 6.3.4 å®ç°åŸºäºäº‹ä»¶æº¯æºçš„Sagaç¼–æ’å™¨
  - ç¬¬7ç«  åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®ç°æŸ¥è¯¢
    - 7.1 ä½¿ç”¨APIç»„åˆæ¨¡å¼è¿›è¡ŒæŸ¥è¯¢
      - 7.1.1 findOrder()æŸ¥è¯¢æ“ä½œ
      - 7.1.2 ä»€ä¹ˆæ˜¯APIç»„åˆæ¨¡å¼
      - 7.1.3 ä½¿ç”¨APIç»„åˆæ¨¡å¼å®ç°findOrder()æŸ¥è¯¢æ“ä½œ
      - 7.1.4 APIç»„åˆæ¨¡å¼çš„è®¾è®¡ç¼ºé™·
      - 7.1.5 APIç»„åˆæ¨¡å¼çš„å¥½å¤„å’Œå¼Šç«¯
    - 7.2 ä½¿ç”¨CQRSæ¨¡å¼
      - 7.2.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨CQRS
      - 7.2.2 ä»€ä¹ˆæ˜¯CQRS
      - 7.2.3 CQRSçš„å¥½å¤„
      - 7.2.4 CQRSçš„å¼Šç«¯
    - 7.3 è®¾è®¡CQRSè§†å›¾
      - 7.3.1 é€‰æ‹©è§†å›¾å­˜å‚¨åº“
      - 7.3.2 è®¾è®¡æ•°æ®è®¿é—®æ¨¡å—
      - 7.3.3 æ·»åŠ å’Œæ›´æ–°CQRSè§†å›¾
    - 7.4 å®ç°åŸºäºAWS DynamoDBçš„CQRSè§†å›¾
      - 7.4.1 OrderHistoryEventHandlersæ¨¡å—
      - 7.4.2 DynamoDBä¸­çš„æ•°æ®å»ºæ¨¡å’ŒæŸ¥è¯¢è®¾è®¡
      - 7.4.3 OrderHistoryDaoDynamoDbç±»
  - ç¬¬8ç«  å¤–éƒ¨APIæ¨¡å¼
    - 8.1 å¤–éƒ¨APIçš„è®¾è®¡éš¾é¢˜
      - 8.1.1 FTGOç§»åŠ¨å®¢æˆ·ç«¯APIçš„è®¾è®¡éš¾é¢˜
      - 8.1.2 å…¶ä»–ç±»å‹å®¢æˆ·ç«¯APIçš„è®¾è®¡éš¾é¢˜
    - 8.2 API Gatewayæ¨¡å¼
      - 8.2.1 ä»€ä¹ˆæ˜¯API Gatewayæ¨¡å¼
      - 8.2.2 API Gatewayæ¨¡å¼çš„å¥½å¤„å’Œå¼Šç«¯
      - 8.2.3 ä»¥Netflixä¸ºä¾‹çš„API Gateway
      - 8.2.4 API Gatewayçš„è®¾è®¡éš¾é¢˜
    - 8.3 å®ç°ä¸€ä¸ªAPI Gateway
      - 8.3.1 ä½¿ç”¨ç°æˆçš„API Gatewayäº§å“æˆ–æœåŠ¡
      - 8.3.2 å¼€å‘è‡ªå·±çš„API Gateway
      - 8.3.3 ä½¿ç”¨GraphQLå®ç°API Gateway
  - **ç¬¬9ç« ** å¾®æœåŠ¡æ¶æ„ä¸­çš„æµ‹è¯•ç­–ç•¥ï¼ˆä¸Šï¼‰
    collapsed:: true
    - 9.1 å¾®æœåŠ¡æ¶æ„ä¸­çš„æµ‹è¯•ç­–ç•¥æ¦‚è¿°
      - 9.1.1 ä»€ä¹ˆæ˜¯æµ‹è¯•
      - 9.1.2 å¾®æœåŠ¡æ¶æ„ä¸­çš„æµ‹è¯•æŒ‘æˆ˜
      - 9.1.3 éƒ¨ç½²æµæ°´çº¿
    - 9.2 ä¸ºæœåŠ¡ç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.1 ä¸ºå®ä½“ç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.2 ä¸ºå€¼å¯¹è±¡ç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.3 ä¸ºSagaç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.4 ä¸ºé¢†åŸŸæœåŠ¡ç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.5 ä¸ºæ§åˆ¶å™¨ç¼–å†™å•å…ƒæµ‹è¯•
      - 9.2.6 ä¸ºäº‹ä»¶å’Œæ¶ˆæ¯å¤„ç†ç¨‹åºç¼–å†™å•å…ƒæµ‹è¯•
  - **ç¬¬10ç« ** å¾®æœåŠ¡æ¶æ„ä¸­çš„æµ‹è¯•ç­–ç•¥ï¼ˆä¸‹ï¼‰
    collapsed:: true
    - 10.1 ç¼–å†™é›†æˆæµ‹è¯•
      - 10.1.1 é’ˆå¯¹æŒä¹…åŒ–å±‚çš„é›†æˆæµ‹è¯•
      - 10.1.2 é’ˆå¯¹åŸºäºRESTçš„è¯·æ±‚/å“åº”å¼äº¤äº’çš„é›†æˆæµ‹è¯•
      - 10.1.3 é’ˆå¯¹å‘å¸ƒ/è®¢é˜…å¼äº¤äº’çš„é›†æˆæµ‹è¯•
      - 10.1.4 é’ˆå¯¹å¼‚æ­¥è¯·æ±‚/å“åº”å¼äº¤äº’çš„é›†æˆå¥‘çº¦æµ‹è¯•
    - 10.2 ç¼–å†™ç»„ä»¶æµ‹è¯•
      - 10.2.1 å®šä¹‰éªŒæ”¶æµ‹è¯•
      - 10.2.2 ä½¿ç”¨Gherkinç¼–å†™éªŒæ”¶æµ‹è¯•
      - 10.2.3 è®¾è®¡ç»„ä»¶æµ‹è¯•
      - 10.2.4 ä¸ºFTGOçš„Order Serviceç¼–å†™ç»„ä»¶æµ‹è¯•
    - 10.3 ç«¯åˆ°ç«¯æµ‹è¯•
      - 10.3.1 è®¾è®¡ç«¯åˆ°ç«¯æµ‹è¯•
      - 10.3.2 ç¼–å†™ç«¯åˆ°ç«¯æµ‹è¯•
      - 10.3.3 è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
  - ç¬¬11ç«  å¼€å‘é¢å‘ç”Ÿäº§ç¯å¢ƒçš„å¾®æœåŠ¡åº”ç”¨
    collapsed:: true
    - 11.1 å¼€å‘å®‰å…¨çš„æœåŠ¡
      - 11.1.1 ä¼ ç»Ÿå•ä½“åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§
      - 11.1.2 åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®ç°å®‰å…¨æ€§
    - 11.2 è®¾è®¡å¯é…ç½®çš„æœåŠ¡
      - 11.2.1 ä½¿ç”¨åŸºäºæ¨é€çš„å¤–éƒ¨åŒ–é…ç½®
      - 11.2.2 ä½¿ç”¨åŸºäºæ‹‰å–çš„å¤–éƒ¨åŒ–é…ç½®
    - 11.3 è®¾è®¡å¯è§‚æµ‹çš„æœåŠ¡
      - 11.3.1 ä½¿ç”¨å¥åº·æ£€æŸ¥APIæ¨¡å¼
      - 11.3.2 ä½¿ç”¨æ—¥å¿—èšåˆæ¨¡å¼
      - 11.3.3 ä½¿ç”¨åˆ†å¸ƒå¼è¿½è¸ªæ¨¡å¼
      - 11.3.4 ä½¿ç”¨åº”ç”¨ç¨‹åºæŒ‡æ ‡æ¨¡å¼
      - 11.3.5 ä½¿ç”¨å¼‚å¸¸è¿½è¸ªæ¨¡å¼
      - 11.3.6 ä½¿ç”¨å®¡è®¡æ—¥å¿—æ¨¡å¼
    - 11.4 ä½¿ç”¨å¾®æœåŠ¡åŸºåº•æ¨¡å¼å¼€å‘æœåŠ¡
      - 11.4.1 ä½¿ç”¨å¾®æœåŠ¡åŸºåº•
      - 11.4.2 ä»å¾®æœåŠ¡åŸºåº•åˆ°æœåŠ¡ç½‘æ ¼
  - ç¬¬12ç«  éƒ¨ç½²å¾®æœåŠ¡åº”ç”¨
    collapsed:: true
    - 12.1 éƒ¨ç½²æ¨¡å¼ï¼šç¼–ç¨‹è¯­è¨€ç‰¹å®šçš„å‘å¸ƒåŒ…æ ¼å¼
      - 12.1.1 ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç‰¹å®šçš„å‘å¸ƒåŒ…æ ¼å¼è¿›è¡Œéƒ¨ç½²çš„å¥½å¤„
      - 12.1.2 ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç‰¹å®šçš„å‘å¸ƒåŒ…æ ¼å¼è¿›è¡Œéƒ¨ç½²çš„å¼Šç«¯
    - 12.2 éƒ¨ç½²æ¨¡å¼ï¼šå°†æœåŠ¡éƒ¨ç½²ä¸ºè™šæ‹Ÿæœº
      - 12.2.1 å°†æœåŠ¡éƒ¨ç½²ä¸ºè™šæ‹Ÿæœºçš„å¥½å¤„
      - 12.2.2 å°†æœåŠ¡éƒ¨ç½²ä¸ºè™šæ‹Ÿæœºçš„å¼Šç«¯
    - 12.3 éƒ¨ç½²æ¨¡å¼ï¼šå°†æœåŠ¡éƒ¨ç½²ä¸ºå®¹å™¨
      - 12.3.1 ä½¿ç”¨Dockeréƒ¨ç½²æœåŠ¡
      - 12.3.2 å°†æœåŠ¡éƒ¨ç½²ä¸ºå®¹å™¨çš„å¥½å¤„
      - 12.3.3 å°†æœåŠ¡éƒ¨ç½²ä¸ºå®¹å™¨çš„å¼Šç«¯
    - 12.4 ä½¿ç”¨Kuberneteséƒ¨ç½²FTGOåº”ç”¨ç¨‹åº
      - 12.4.1 ä»€ä¹ˆæ˜¯Kubernetes
      - 12.4.2 åœ¨Kubernetesä¸Šéƒ¨ç½²Restaurant Service
      - 12.4.3 éƒ¨ç½²API Gateway
      - 12.4.4 é›¶åœæœºéƒ¨ç½²
      - 12.4.5 ä½¿ç”¨æœåŠ¡ç½‘æ ¼åˆ†éš”éƒ¨ç½²ä¸å‘å¸ƒæµç¨‹
    - 12.5 éƒ¨ç½²æ¨¡å¼ï¼šServerlesséƒ¨ç½²
      - 12.5.1 ä½¿ç”¨AWS Lambdaè¿›è¡ŒServerlesséƒ¨ç½²
      - 12.5.2 å¼€å‘Lambdaå‡½æ•°
      - 12.5.3 è°ƒç”¨Lambdaå‡½æ•°
      - 12.5.4 ä½¿ç”¨Lambdaå‡½æ•°çš„å¥½å¤„
      - 12.5.5 ä½¿ç”¨Lambdaå‡½æ•°çš„å¼Šç«¯
    - 12.6 ä½¿ç”¨AWS Lambdaå’ŒAWS Gatewayéƒ¨ç½²RESTfulæœåŠ¡
      - 12.6.1 AWS Lambdaç‰ˆæœ¬çš„Restaurant Service
      - 12.6.2 æŠŠæœåŠ¡æ‰“åŒ…ä¸ºZIPæ–‡ä»¶
      - 12.6.3 ä½¿ç”¨Serverlessæ¡†æ¶éƒ¨ç½²Lambdaå‡½æ•°
  - ç¬¬13ç«  å¾®æœåŠ¡æ¶æ„çš„é‡æ„ç­–ç•¥
    collapsed:: true
    - 13.1 é‡æ„åˆ°å¾®æœåŠ¡éœ€è¦è€ƒè™‘çš„é—®é¢˜
      - 13.1.1 ä¸ºä»€ä¹ˆè¦é‡æ„å•ä½“åº”ç”¨
      - 13.1.2 ç»æ€å•ä½“åº”ç”¨
    - 13.2 å°†å•ä½“åº”ç”¨é‡æ„ä¸ºå¾®æœåŠ¡æ¶æ„çš„è‹¥å¹²ç­–ç•¥
      - 13.2.1 å°†æ–°åŠŸèƒ½å®ç°ä¸ºæœåŠ¡
      - 13.2.2 éš”ç¦»è¡¨ç°å±‚ä¸åç«¯
      - 13.2.3 æå–ä¸šåŠ¡èƒ½åŠ›åˆ°æœåŠ¡ä¸­
    - 13.3 è®¾è®¡æœåŠ¡ä¸å•ä½“çš„åä½œæ–¹å¼
      - 13.3.1 è®¾è®¡é›†æˆèƒ¶æ°´
      - 13.3.2 åœ¨æœåŠ¡å’Œå•ä½“ä¹‹é—´ç»´æŒæ•°æ®ä¸€è‡´æ€§
      - 13.3.3 å¤„ç†èº«ä»½éªŒè¯å’Œè®¿é—®æˆæƒ
    - 13.4 å°†æ–°åŠŸèƒ½å®ç°ä¸ºæœåŠ¡ï¼šå¤„ç†é”™è¯¯é…é€è®¢å•
      - 13.4.1 Delayed Delivery Serviceçš„è®¾è®¡
      - 13.4.2 ä¸ºDelayed Delivery Serviceè®¾è®¡é›†æˆèƒ¶æ°´
    - 13.5 ä»å•ä½“ä¸­æå–é€é¤ç®¡ç†åŠŸèƒ½
      - 13.5.1 ç°æœ‰çš„é€é¤ç®¡ç†åŠŸèƒ½
      - 13.5.2 Delivery Serviceæ¦‚è§ˆ
      - 13.5.3 è®¾è®¡Delivery Serviceçš„é¢†åŸŸæ¨¡å‹
      - 13.5.4 Delivery Serviceé›†æˆèƒ¶æ°´çš„è®¾è®¡
      - 13.5.5 ä¿®æ”¹FTGOå•ä½“ä½¿å…¶èƒ½å¤Ÿä¸Delivery Serviceäº¤äº’