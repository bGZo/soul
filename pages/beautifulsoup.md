description:: A Python library for pulling data out of HTML and XML files
icon:: ğŸ
tags:: #[[Python Library]]
created:: [[20230627]]

- ## Why
- ## How
- ## What
  - [beautifulsoup4 Â· PyPI](https://pypi.org/project/beautifulsoup4/)
  - [Beautiful Soup 4.4.0 æ–‡æ¡£ â€” Beautiful Soup 4.2.0 documentation (crummy.com)](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/)
    collapsed:: true
    - [å¯»æ±‚å¸®åŠ©](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id5)
    - [å¿«é€Ÿå¼€å§‹](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id8)
    - [å®‰è£… Beautiful Soup](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id9)
    - [å®‰è£…å®Œæˆåçš„é—®é¢˜](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id12)
      - [å®‰è£…è§£æå™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id13)
    - [å¦‚ä½•ä½¿ç”¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id14)
    - [å¯¹è±¡çš„ç§ç±»](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id15)
    - [Tag](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#tag)
    - [Name](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#name)
      - [Attributes](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#attributes)
    - [å¤šå€¼å±æ€§](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id16)
    - [å¯ä»¥éå†çš„å­—ç¬¦ä¸²](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id17)
      - [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#beautifulsoup)
      - [æ³¨é‡ŠåŠç‰¹æ®Šå­—ç¬¦ä¸²](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id18)
    - [éå†æ–‡æ¡£æ ‘](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id19)
    - [å­èŠ‚ç‚¹](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id20)
    - [tagçš„åå­—](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id21)
      - [.contents å’Œ .children](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#contents-children)
      - [.descendants](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#descendants)
      - [.string](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#string)
      - [.strings å’Œ stripped_strings](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#strings-stripped-strings)
    - [çˆ¶èŠ‚ç‚¹](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id24)
    - [.parent](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#parent)
      - [.parents](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#parents)
    - [å…„å¼ŸèŠ‚ç‚¹](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id25)
    - [.next_sibling å’Œ .previous_sibling](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#next-sibling-previous-sibling)
      - [.next_siblings å’Œ .previous_siblings](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#next-siblings-previous-siblings)
    - [å›é€€å’Œå‰è¿›](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id26)
    - [.next_element å’Œ .previous_element](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#next-element-previous-element)
      - [.next_elements å’Œ .previous_elements](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#next-elements-previous-elements)
    - [æœç´¢æ–‡æ¡£æ ‘](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id28)
    - [è¿‡æ»¤å™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id29)
    - [å­—ç¬¦ä¸²](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id31)
      - [æ­£åˆ™è¡¨è¾¾å¼](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id32)
      - [åˆ—è¡¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id33)
      - [True](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#true)
      - [æ–¹æ³•](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id34)
    - [find_all()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-all)
    - [name å‚æ•°](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id36)
      - [keyword å‚æ•°](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#keyword)
      - [æŒ‰CSSæœç´¢](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#css)
      - [string å‚æ•°](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id37)
      - [limit å‚æ•°](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#limit)
      - [recursive å‚æ•°](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#recursive)
    - [åƒè°ƒç”¨ find_all() ä¸€æ ·è°ƒç”¨tag](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-all-tag)
      - [find()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find)
      - [find_parents() å’Œ find_parent()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-parents-find-parent)
      - [find_next_siblings() å’Œ find_next_sibling()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-next-siblings-find-next-sibling)
      - [find_previous_siblings() å’Œ find_previous_sibling()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-previous-siblings-find-previous-sibling)
      - [find_all_next() å’Œ find_next()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-all-next-find-next)
      - [find_all_previous() å’Œ find_previous()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#find-all-previous-find-previous)
      - [CSSé€‰æ‹©å™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id42)
    - [ä¿®æ”¹æ–‡æ¡£æ ‘](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id45)
    - [ä¿®æ”¹tagçš„åç§°å’Œå±æ€§](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id46)
      - [ä¿®æ”¹ .string](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id47)
      - [append()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#append)
      - [NavigableString() å’Œ .new_tag()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#navigablestring-new-tag)
      - [insert()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#insert)
      - [insert_before() å’Œ insert_after()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#insert-before-insert-after)
      - [clear()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#clear)
      - [extract()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#extract)
      - [decompose()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#decompose)
      - [replace_with()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#replace-with)
      - [wrap()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#wrap)
      - [unwrap()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#unwrap)
    - [è¾“å‡º](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id49)
    - [æ ¼å¼åŒ–è¾“å‡º](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id50)
      - [å‹ç¼©è¾“å‡º](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id51)
      - [è¾“å‡ºæ ¼å¼](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id52)
      - [get_text()](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#get-text)
    - [æŒ‡å®šæ–‡æ¡£è§£æå™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id53)
    - [è§£æå™¨ä¹‹é—´çš„åŒºåˆ«](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id54)
    - [ç¼–ç ](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id56)
    - [è¾“å‡ºç¼–ç ](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id58)
      - [Unicode, Dammit! (ä¹±ç , é !)](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#unicode-dammit)
    - [æ™ºèƒ½å¼•å·](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id59)
      - [çŸ›ç›¾çš„ç¼–ç ](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id61)
    - [æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸åŒ](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id63)
    - [å¤åˆ¶Beautiful Soupå¯¹è±¡](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id64)
    - [è§£æéƒ¨åˆ†æ–‡æ¡£](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id65)
    - [SoupStrainer](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#soupstrainer)
    - [å¸¸è§é—®é¢˜](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id66)
    - [ä»£ç è¯Šæ–­](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id67)
      - [æ–‡æ¡£è§£æé”™è¯¯](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id68)
      - [ç‰ˆæœ¬é”™è¯¯](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id69)
      - [è§£ææˆXML](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#xml)
      - [è§£æå™¨çš„é”™è¯¯](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id70)
      - [æ‚é¡¹é”™è¯¯](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id72)
      - [å¦‚ä½•æé«˜æ•ˆç‡](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id73)
    - [Beautiful Soup 3](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#beautiful-soup-3)
    - [è¿ç§»åˆ°BS4](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id76)
    - [éœ€è¦çš„è§£æå™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id77)
      - [æ–¹æ³•åçš„å˜åŒ–](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id78)
      - [ç”Ÿæˆå™¨](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id79)
      - [XML](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id80)
      - [å®ä½“](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id81)
      - [è¿ç§»æ‚é¡¹](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/#id82)
  - [Beautiful Soup Documentation â€” Beautiful Soup 4.12.0 documentation (crummy.com)](https://www.crummy.com/software/BeautifulSoup/bs4/doc/)
    - > This document covers Beautiful Soup version 4.12.1. The examples in this documentation were written for Python 3.8.
    - Installing
      collapsed:: true
      - ```
        $ apt-get install Python-bs4
        $ easy_install beautifulsoup4
        $ pip install beautifulsoup4
        ```
    - Parser
      - ```python
        BeautifulSoup(markup, "html.parser")
        BeautifulSoup(markup, "lxml") # "xml" / "lxml-xml"
        BeautifulSoup(markup, "html5lib")
        ```
        - [lxml parser](http://lxml.de/)
        - [html5lib parser](http://code.google.com/p/html5lib/)
      - [Differences between parsers](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#differences-between-parsers)
    - Kinds of objects
      collapsed:: true
      - `Tag`: corresponds(ç›¸åŒ) to an XML or HTML tag in the original document.
      - `NavigableString`: contain a bit of text within a tag.
        collapsed:: true
        - #+BEGIN_NOTE
          NavigableString supports most of the features described in Navigating the tree and Searching the tree, but not all of them. In particular, since a string canâ€™t contain anything (the way a tag may contain a string or another tag), strings donâ€™t support the .contents or .string attributes, or the find() method.
          If you want to use a NavigableString outside of Beautiful Soup, you should call unicode() on it to turn it into a normal Python Unicode string. If you donâ€™t, your string will carry around a reference to the entire Beautiful Soup parse tree, even when youâ€™re done using Beautiful Soup. This is a big waste of memory.
          #+END_NOTE
      - `BeautifulSoup`:  represents the parsed document as a whole.
      - `Comment`:  a special type of `NavigableString`
    - Navigating the treeï¼ˆéå†æ–‡æ¡£æ ‘ï¼‰
      collapsed:: true
      - Going down
        - `.contents` and `.children`
        - `.descendants`ï¼ˆåä»£ï¼‰
          - ```python
            for child in head_tag.descendants:
                print(child)
            # <title>The Dormouse's story</title>
            # The Dormouse's story
            ```
            - The <head> tag has only one child, but it has two descendants: the <title> tag and the <title> tagâ€™s child.
        - .`strings` and `stripped_strings`
          - The <head> tag has only one child, but it has two descendants: the <title> tag and the <title> tagâ€™s child.
      - Going up
        - `.parent`
        - `.parents`
      - Going sideways
        - `.next_sibling` and `.previous_sibling`
        - `.next_siblings` and `.previous_siblings`
      - Going back and forth
        - `.next_element` å’Œ `.previous_element`
    - Searching the tree
      - Kinds of filters 
        - String `soup.find_all('b')`
        - Regular expression `soup.find_all(re.compile("^b"))`
        - List `soup.find_all(["a", "b"])`
        - True `soup.find_all(True)`
        - Function
          collapsed:: true
          - ```python
            def has_class_but_no_id(tag):
                return tag.has_attr('class') and not tag.has_attr('id')
            soup.find_all(has_class_but_no_id)
            ```
      - `find_all(name, attrs, recursive, string, limit, **kwargs)`
        -
-
- ## Notes
  - #+BEGIN_NOTE
    Self-closing tags, like `<br/>`, `<img/>`, have a redundant block under `html.parser`!
    #+END_NOTE
    - ```python
      from bs4 import BeautifulSoup
      html_doc='''
      <a class="work_thumb_box" data-vue-component="thumb-img-popup">
        <img/>
        <br/>
        <div class="work_img_popover" v-cloak="">
          <img/>
        </div>
      </a>
      '''
      soup = BeautifulSoup(html_doc, 'html.parser')
      print(soup.a.img.next_sibling) #2
      print(soup.a.img.next_sibling
            			.next_sibling.next_sibling) # 2
      print(soup.a.img.next_sibling
            			.next_sibling.next_sibling
            			.next_sibling.img.next_sibling) # 2
      ```
    - å¦‚ä¸Šä»£ç ï¼Œåœ¨åŸç”Ÿçš„æ‰«æå™¨ä¸‹ï¼Œæ‰“å°äº†ä¸‰ä¸ªè‡ªé—­å’Œæ ‡ç­¾çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿï¼Œå¾—åˆ°çš„æ˜¯ 6 ä¸ªæ¢è¡Œç¬¦ï¼Œç„¶åå›æ˜¾æ˜¾ç¤º7è¡Œã€‚
-